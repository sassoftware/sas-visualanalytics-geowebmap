(this.webpackJsonpgeowebmap=this.webpackJsonpgeowebmap||[]).push([[114],{1058:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r(3),i=r(4),n=r(6),s=r(7),o=r(0),u=r(32),c=r(185),l=r(1),p=(r(17),r(18),r(16),r(9)),y={visible:"visibleSublayers"},h=function(e){Object(n.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).scale=0,i}return Object(i.a)(r,[{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("wms-sublayer-update",(function(e){return t.notifyChange(y[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){return this.visibleSublayers.filter((function(e){return e.name})).map((function(e){return e.name})).join(",")}},{key:"version",get:function(){this.commitProperty("layers");var e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this.layer,t=this.scale,r=null==e?void 0:e.sublayers,a=[];return null==r||r.forEach((function e(r){var i=r.minScale,n=r.maxScale,s=r.sublayers;r.visible&&(0===t||(0===i||t<=i)&&(0===n||t>=n))&&(s?s.forEach(e):a.unshift(r))})),a}},{key:"toJSON",value:function(){var e=this.layer,t=this.layers;return{format:e.imageFormat,request:"GetMap",service:"WMS",styles:"",transparent:e.imageTransparency,version:e.version,layers:t}}}]),r}(Object(c.b)(u.a));Object(o.a)([Object(l.b)()],h.prototype,"layer",null),Object(o.a)([Object(l.b)({readOnly:!0})],h.prototype,"layers",null),Object(o.a)([Object(l.b)({type:Number})],h.prototype,"scale",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],h.prototype,"version",null),Object(o.a)([Object(l.b)({readOnly:!0})],h.prototype,"visibleSublayers",null),h=Object(o.a)([Object(p.a)("esri.layers.support.ExportWMSImageParameters")],h)},1121:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r(3),i=r(4),n=r(6),s=r(7),o=r(0),u=r(20),c=r(1),l=(r(17),r(18),r(16),r(9)),p=r(200),y=r(1058),h=function(e){var t=function(e){Object(n.a)(r,e);var t=Object(s.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"initialize",value:function(){this.exportImageParameters=new y.a({layer:this.layer})}},{key:"destroy",value:function(){this.exportImageParameters.destroy(),this.exportImageParameters=null}},{key:"exportImageVersion",get:function(){var e;return null==(e=this.exportImageParameters)||e.commitProperty("version"),this.commitProperty("timeExtent"),(this._get("exportImageVersion")||0)+1}},{key:"fetchPopupFeatures",value:function(e){var t=this.layer;if(!e)return Promise.reject(new u.a("wmslayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:t}));var r=t.popupEnabled;if(!r)return Promise.reject(new u.a("wmslayerview:fetchPopupFeatures","popupEnabled should be true",{popupEnabled:r}));var a=this.createFetchPopupFeaturesQuery(e);if(!a)return Promise.resolve([]);var i=a.extent,n=a.width,s=a.height,o=a.x,c=a.y;if(!(i&&n&&s))throw new u.a("wmslayerview:fetchPopupFeatures","WMSLayer does not support fetching features.",{extent:i,width:n,height:s});var l=t.fetchFeatureInfo(i,n,s,o,c);return Promise.resolve(l?[l]:[])}}]),r}(e);return Object(o.a)([Object(c.b)()],t.prototype,"exportImageParameters",void 0),Object(o.a)([Object(c.b)({readOnly:!0})],t.prototype,"exportImageVersion",null),Object(o.a)([Object(c.b)()],t.prototype,"layer",void 0),Object(o.a)([Object(c.b)(p.a)],t.prototype,"timeExtent",void 0),t=Object(o.a)([Object(l.a)("esri.layers.mixins.WMSLayerView")],t)}},1306:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));var a=r(3),i=r(4),n=r(6),s=r(7),o=r(0),u=r(20),c=r(1),l=(r(17),r(18),r(16),r(9)),p=r(61),y=r(1089),h=r(1121),b=function(e){Object(n.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).type="wms-3d",e}return Object(i.a)(r,[{key:"initialize",value:function(){var e=this;this.layer.supportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new u.a("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view"))),this.updatingHandles.add(this.exportImageParameters,"version",(function(){e.updatingHandles.addPromise(e.refreshDebounced())}))}},{key:"createFetchPopupFeaturesQuery",value:function(e){var t=this.findExtentInfoAt(e),r=t.extent,a=new p.a(r[0],r[1],r[2],r[3],this._spatialReference),i=t.imageSize,n=i.width,s=i.height,o=a.width/n;return{extent:a,width:n,height:s,x:Math.round((e.x-a.xmin)/o),y:Math.round((a.ymax-e.y)/o)}}},{key:"getFetchOptions",value:function(){return{timeExtent:this.timeExtent}}}]),r}(Object(h.a)(y.a));Object(o.a)([Object(c.b)()],b.prototype,"suspended",void 0);var f=b=Object(o.a)([Object(l.a)("esri.views.3d.layers.WMSLayerView3D")],b)}}]);
//# sourceMappingURL=114.7109120f.chunk.js.map