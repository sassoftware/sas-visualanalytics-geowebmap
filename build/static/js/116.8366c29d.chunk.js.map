{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/layers/GraphicsLayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js"],"names":["g","arguments","type","frustumVisibility","n","slicePlaneEnabled","drapeSourceType","suspendResumeExtent","fullExtentInLocalViewSpatialReference","this","_set","o","owner","layer","scaleVisibilityEnabled","graphics3d","setup","setupSuspendResumeExtent","updatingHandles","add","graphicsCore","opacityChange","handles","on","i","graphicUpdateHandler","addResolvingPromise","d","then","internal","notifyChange","s","view","destroy","canResume","suspended","e","scaleVisibility","outsideScaleRange","outsideOfView","a","clientGraphics","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","graphics3DGraphics","graphics3DGraphicsByObjectID","symbolUpdateType","getGraphicFromGraphicUid","whenGraphicBounds","computeAttachmentOrigin","getSymbolLayerSize","Promise","resolve","loadedGraphics","maskOccludee","highlight","effectiveUpdatePolicy","updating","basemapTerrain","ready","c","computedExtent","extentPadding","setExtent","t","r","displayedNumberOfFeatures","length","maximumNumberOfFeatures","totalNumberOfFeatures","nodes","core","elevationUpdating","elevationAlignment","visibilityFrustum","h","u","aliasOf","prototype","readOnly","Boolean","y","p","l","spatialReference","fullExtent","equals","clone","state","isLocal","portalItem","destroyed","catch","extent","extentIntersectionDirty","_isVisibleBelowSurface","layerView","extentIntersection","renderCoordsHelper","resourceController","scheduler","viewChange","watch","registerTask","FRUSTUM_VISIBILITY","elevationBoundsChange","viewingMode","isVisibleBelowSurface","updateIsVisibleBelowSurface","_setDirty","map","ground","navigationConstraint","opaque","radius","elevationBounds","min","max","Math","update","updateExtentIntersection","frustum","isVisibleInFrustum"],"mappings":"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","file":"static/js/116.8366c29d.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import{isSome as e}from\"../../../core/maybe.js\";import{whenTrueOnce as s,init as t,watch as r}from\"../../../core/watchUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as h}from\"./LayerView3D.js\";import n from\"./graphics/Graphics3DFrustumVisibility.js\";import o from\"./graphics/Graphics3DGraphicLikeLayerView.js\";import{enlargeExtent as c}from\"./graphics/graphicUtils.js\";import{toViewIfLocal as d}from\"./support/projectExtentUtils.js\";import u from\"../../layers/LayerView.js\";const l=1.2;let g=class extends(h(u)){constructor(){super(...arguments),this.type=\"graphics-3d\",this.frustumVisibility=new n,this.slicePlaneEnabled=!1,this.drapeSourceType=1,this.suspendResumeExtent=null,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set(\"graphics3d\",new o({owner:this,layer:this.layer,scaleVisibilityEnabled:!0})),this.graphics3d.setup(),this.frustumVisibility.setup(this),this.setupSuspendResumeExtent(),this.updatingHandles.add(this,\"fullOpacity\",(()=>this.graphics3d.graphicsCore.opacityChange())),this.handles.add(this.layer.on(\"graphic-update\",(i=>this.graphics3d.graphicsCore.graphicUpdateHandler(i)))),this.addResolvingPromise(d(this).then((i=>this.fullExtentInLocalViewSpatialReference=i))),this.layer.internal?this.notifyChange(\"updating\"):this.handles.add(s(this.view,\"basemapTerrain.ready\",(()=>this.notifyChange(\"updating\"))))}destroy(){this.frustumVisibility&&(this.frustumVisibility.destroy(),this._set(\"frustumVisibility\",null)),this.graphics3d&&(this.graphics3d.destroy(),this._set(\"graphics3d\",null))}get legendEnabled(){return this.canResume()&&!this.frustumVisibility.suspended}get suspendInfo(){var i;const s={};return e(this.graphics3d.scaleVisibility)&&this.graphics3d.scaleVisibility.suspended&&(s.outsideScaleRange=!0),s.outsideOfView=!(null==(i=this.frustumVisibility)||!i.suspended),s}async fetchPopupFeatures(i,s){return e(s)?s.clientGraphics:null}notifyGraphicGeometryChanged(i){this.graphics3d.graphicsCore.notifyGraphicGeometryChanged(i)}notifyGraphicVisibilityChanged(i){this.graphics3d.graphicsCore.notifyGraphicVisibilityChanged(i)}get graphics3DGraphics(){return this.graphics3d.graphicsCore.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphics3d?this.graphics3d.graphicsCore.graphics3DGraphicsByObjectID:null}get symbolUpdateType(){return this.graphics3d.graphicsCore.symbolUpdateType}getGraphicFromGraphicUid(i){return this.graphics3d.getGraphicFromGraphicUid(i)}whenGraphicBounds(i,e){return this.graphics3d.whenGraphicBounds(i,e)}computeAttachmentOrigin(i,e){return this.graphics3d?this.graphics3d.graphicsCore.computeAttachmentOrigin(i,e):null}getSymbolLayerSize(i,e){return this.graphics3d.getSymbolLayerSize(i,e)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(i){return this.graphics3d.maskOccludee(i)}highlight(i){return this.graphics3d.highlight(i)}get updatePolicy(){var i;return(null==(i=this.graphics3d)?void 0:i.graphicsCore.effectiveUpdatePolicy)||1}canResume(){var i;return super.canResume()&&!(null!=(i=this.graphics3d)&&i.suspended)}isUpdating(){var i,e;return!(!(this.graphics3d&&this.graphics3d.updating||this.frustumVisibility&&this.frustumVisibility.updating)&&(this.layer.internal||null!=(i=this.view)&&null!=(e=i.basemapTerrain)&&e.ready))}setupSuspendResumeExtent(){const i=()=>{this.suspendResumeExtent=c(this.graphics3d.graphicsCore.computedExtent,this.suspendResumeExtent,l,this.graphics3d.graphicsCore.extentPadding),this.frustumVisibility.setExtent(this.suspendResumeExtent)};t(this.graphics3d.graphicsCore,\"computedExtent\",(()=>i()),!0),r(this.graphics3d.graphicsCore,\"extentPadding\",(()=>i()),!0)}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.graphics3d.elevationAlignment.updating,visibilityFrustum:!this.frustumVisibility.suspended}}};i([a({aliasOf:\"layer.graphics\"})],g.prototype,\"loadedGraphics\",void 0),i([a({readOnly:!0})],g.prototype,\"suspended\",void 0),i([a({readOnly:!0})],g.prototype,\"legendEnabled\",null),i([a({readOnly:!0})],g.prototype,\"updating\",void 0),i([a()],g.prototype,\"layer\",void 0),i([a({readOnly:!0})],g.prototype,\"frustumVisibility\",void 0),i([a({readOnly:!0})],g.prototype,\"graphics3d\",void 0),i([a({type:Boolean})],g.prototype,\"slicePlaneEnabled\",void 0),i([a({readOnly:!0})],g.prototype,\"suspendInfo\",null),g=i([p(\"esri.views.3d.layers.GraphicsLayerView3D\")],g);var y=g;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{project as r}from\"../../../../geometry/support/webMercatorUtils.js\";import{projectGeometry as o}from\"../../../../portal/support/geometryServiceUtils.js\";function t(t){const l=t.view.spatialReference,s=t.layer.fullExtent,i=s&&s.spatialReference;if(!i)return Promise.resolve(null);if(i.equals(l))return Promise.resolve(s.clone());const n=r(s,l);return e(n)?Promise.resolve(n):t.view.state.isLocal?o(s,l,t.layer.portalItem).then((e=>!t.destroyed&&e?e:void 0)).catch((()=>null)):Promise.resolve(null)}export{t as toViewIfLocal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import s from\"../../../../core/Handles.js\";import{init as i}from\"../../../../core/watchUtils.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getReferenceEllipsoid as o}from\"../../../../geometry/projectionEllipsoid.js\";import{FrustumExtentIntersection as a}from\"../../support/FrustumExtentIntersection.js\";import{TaskPriority as l}from\"../../../support/Scheduler.js\";const h=1.2;let u=class extends t{constructor(){super(...arguments),this.suspended=!1,this.extent=null,this.extentIntersectionDirty=!0,this._isVisibleBelowSurface=!1,this.handles=new s,this.layerView=null,this.updating=!0}setup(e){this.layerView=e,this.extentIntersection=new a({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,s=t.basemapTerrain,r=t.resourceController.scheduler;this.handles.add([t.on(\"resize\",(()=>this.viewChange())),t.state.watch(\"camera\",(()=>this.viewChange()),!0),r.registerTask(l.FRUSTUM_VISIBILITY,this),s.on(\"elevation-bounds-change\",(()=>this.elevationBoundsChange()))]),\"local\"===t.viewingMode?this.isVisibleBelowSurface=!0:this.handles.add([i(s,[\"opacity\",\"wireframe\"],(()=>this.updateIsVisibleBelowSurface())),i(t,\"map.ground.navigationConstraint.type\",(()=>this.updateIsVisibleBelowSurface()))])}destroy(){this.layerView=null,this.extent=null,this.extentIntersection=null,this.handles&&(this.handles.destroy(),this.handles=null)}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this.extent=e,this.extentIntersectionDirty=!0,this._setDirty()}viewChange(){this._setDirty()}elevationBoundsChange(){this._setDirty(),this.extentIntersectionDirty=!0}set isVisibleBelowSurface(e){this._isVisibleBelowSurface=e,this._setDirty(),this.extentIntersectionDirty=!0}updateIsVisibleBelowSurface(){const e=this.layerView.view,t=e.basemapTerrain,s=\"local\"===e.viewingMode,i=e.map.ground&&e.map.ground.navigationConstraint&&\"none\"===e.map.ground.navigationConstraint.type;this.isVisibleBelowSurface=s||!t.opaque||i}updateExtentIntersection(){if(!this.extentIntersectionDirty)return;this.extentIntersectionDirty=!1;const e=this.layerView.view;let t;if(this._isVisibleBelowSurface)t=-.3*o(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.elevationBounds;t=s-Math.max(1,(i-s)*(h-1))}this.extentIntersection.update(this.extent,e.spatialReference,t)}get running(){return this.updating}runTask(){if(this._set(\"updating\",!1),!this.extent)return void this._set(\"suspended\",!1);this.updateExtentIntersection();const e=this.layerView.view.frustum,t=o(this.layerView.view.spatialReference).radius;this._set(\"suspended\",!this.extentIntersection.isVisibleInFrustum(e,t))}};e([r({readOnly:!0})],u.prototype,\"suspended\",void 0),e([r({readOnly:!0})],u.prototype,\"updating\",void 0),u=e([n(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")],u);var p=u;export{p as default};\n"],"sourceRoot":""}