{"version":3,"file":"static/js/9229.63ee216e.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/chunks/ImageMaterial.glsl.js","../node_modules/@arcgis/core/views/3d/layers/support/overlayImageUtils.js","../node_modules/@arcgis/core/views/3d/layers/DynamicLayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ReadLinearDepth as i}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as o}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{defaultMaskAlphaCutoff as t}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ColorConversion as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as l}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as s}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{VertexAttribute as n}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function g(g){const p=new s;return p.include(a,{linearDepth:!1}),p.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),p.attributes.add(n.POSITION,\"vec3\"),p.attributes.add(n.UV0,\"vec2\"),p.varyings.add(\"vpos\",\"vec3\"),g.multipassTerrainEnabled&&p.varyings.add(\"depth\",\"float\"),p.vertex.uniforms.add(\"textureCoordinateScaleFactor\",\"vec2\"),p.vertex.code.add(l`\n    void main(void) {\n      vpos = position;\n      ${g.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n      vTexCoord = uv0 * textureCoordinateScaleFactor;\n      gl_Position = transformPosition(proj, view, vpos);\n    }\n  `),p.include(r,g),g.multipassTerrainEnabled&&(p.fragment.include(i),p.include(o,g)),p.fragment.uniforms.add(\"tex\",\"sampler2D\"),p.fragment.uniforms.add(\"opacity\",\"float\"),p.varyings.add(\"vTexCoord\",\"vec2\"),g.output===e.Alpha?p.fragment.code.add(l`\n    void main() {\n      discardBySlice(vpos);\n      ${g.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n\n      float alpha = texture2D(tex, vTexCoord).a * opacity;\n      if (alpha  < ${l.float(t)}) {\n        discard;\n      }\n\n      gl_FragColor = vec4(alpha);\n    }\n    `):(p.fragment.include(d),p.fragment.code.add(l`\n    void main() {\n      discardBySlice(vpos);\n      ${g.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      gl_FragColor = texture2D(tex, vTexCoord) * opacity;\n\n      if (gl_FragColor.a < ${l.float(t)}) {\n        discard;\n      }\n\n      gl_FragColor = highlightSlice(gl_FragColor, vpos);\n      ${g.oitEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n    `)),p}const p=Object.freeze({__proto__:null,build:g});export{p as I,g as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{width as t,height as e,intersects as n}from\"../../../../geometry/support/aaBoundingRect.js\";import{Geometry as r}from\"../../webgl-engine/lib/Geometry.js\";import i from\"../../webgl-engine/lib/GeometryUtil.js\";import{VertexAttribute as o}from\"../../webgl-engine/lib/VertexAttribute.js\";function a(n,r,i){const o=t(n)/e(n),a={width:i,height:i};return o>1.0001?a.height=i/o:o<.9999&&(a.width=i*o),a.width=Math.round(a.width/(t(n)/t(r))),a.height=Math.round(a.height/(e(n)/e(r))),a}function h(t){return i.createSquareGeometry([[t[0],t[1],-1],[t[2],t[1],-1],[t[2],t[3],-1],[t[0],t[3],-1]])}function l(t,e){if(!n(t,e))return h(e);const i=[t[1]-e[1],Math.min(t[3],e[3])-Math.max(t[1],e[1]),e[3]-t[3],123456],a=[t[0]-e[0],Math.min(t[2],e[2])-Math.max(t[0],e[0]),e[2]-t[2],123456],l=e[2]-e[0],u=e[3]-e[1],m=a[0]>0&&a[2]>0?3:2,c=i[0]>0&&i[2]>0?3:2,g=(c+1)*(m+1),w=new Float64Array(3*g),f=new Float32Array(2*g),d=new Uint32Array(6*(c*m-1));let y=0,M=0,b=0,p=0,x=0;for(let n=0;n<4;n++){const t=i[n];if(t<=0)continue;let r=0;for(let i=0;i<4;i++){const t=a[i];t<=0||(w[M++]=e[0]+r,w[M++]=e[1]+y,w[M++]=-1,f[b++]=r/l,f[b++]=y/u,i<3&&n<3&&(1!==i||1!==n)&&(d[x++]=p,d[x++]=p+1,d[x++]=p+m+1,d[x++]=p+1,d[x++]=p+m+2,d[x++]=p+m+1),p++,r+=t)}y+=t}const A=new Uint32Array(d.length);return new r([[o.POSITION,{size:3,data:w,exclusive:!0}],[o.NORMAL,{size:3,data:s,exclusive:!0}],[o.UV0,{size:2,data:f,exclusive:!0}]],[[o.POSITION,d],[o.NORMAL,A],[o.UV0,d]])}const s=[0,0,1];export{a as computeImageExportSize,h as createGeometryForExtent,l as createOuterImageGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{forEach as t,result as i}from\"../../../core/asyncUtils.js\";import r from\"../../../core/Logger.js\";import{isNone as s,isSome as a}from\"../../../core/maybe.js\";import{debounce as n,isAbortError as o,eachAlways as l,onAbort as h,isAborted as m,createAbortError as c,always as d,throwIfAborted as g}from\"../../../core/promiseUtils.js\";import{whenOnce as u}from\"../../../core/watchUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as f}from\"../../../core/accessorSupport/decorators/subclass.js\";import y from\"../../../geometry/Extent.js\";import{equals as w,create as x,width as _,height as v,copy as R,intersection as b}from\"../../../geometry/support/aaBoundingRect.js\";import{DrapeSourceType as S}from\"./interfaces.js\";import{LayerView3D as E}from\"./LayerView3D.js\";import{computeImageExportSize as j,createGeometryForExtent as I,createOuterImageGeometry as A}from\"./support/overlayImageUtils.js\";import{toViewIfLocal as C}from\"./support/projectExtentUtils.js\";import D from\"../support/debugFlags.js\";import{OverlayIndex as L}from\"../terrain/interfaces.js\";import{UpdatePolicy as G}from\"../webgl-engine/lib/basicInterfaces.js\";import{ModelDirty as M}from\"../webgl-engine/lib/ModelDirtyTypes.js\";import{RenderGeometry as T}from\"../webgl-engine/lib/RenderGeometry.js\";import{Texture as P}from\"../webgl-engine/lib/Texture.js\";import{ImageMaterial as O}from\"../webgl-engine/materials/ImageMaterial.js\";import U from\"../../layers/LayerView.js\";import{RefreshableLayerView as V}from\"../../layers/RefreshableLayerView.js\";import{isScaleRangeActive as H}from\"../../support/layerViewUtils.js\";import{TextureWrapMode as N}from\"../../webgl/enums.js\";const z=r.getLogger(\"esri.views.3d.layers.DynamicLayerView3D\");let F=class extends(V(E(U))){constructor(){super(...arguments),this.drapeSourceType=S.RasterImage,this.updatePolicy=G.SYNC,this.fullExtentInLocalViewSpatialReference=null,this.maximumDataResolution=null,this._images=new Array,this._extents=new Array,this._overlays=new Array,this.updateWhenStationary=!0,this.refreshDebounced=n((async e=>{this.destroyed||await this._doRefresh(e).catch((e=>{o(e)||r.getLogger(this.declaredClass).error(e)}))}),2e3)}initialize(){this.addResolvingPromise(C(this).then((e=>this._set(\"fullExtentInLocalViewSpatialReference\",e)))),this.updatingHandles.add((()=>this.suspended),(()=>this._suspendedChangeHandler())),this.handles.add(this.view.resourceController.scheduler.registerIdleStateCallbacks((()=>{this._isScaleRangeActive()&&this.notifyChange(\"suspended\")}),(()=>{}))),this._isScaleRangeLayer()&&this.updatingHandles.add((()=>this.layer.effectiveScaleRange),(()=>this.notifyChange(\"suspended\")))}destroy(){this.clear()}setDrapingExtent(e,t){this._spatialReference=t,e.forEach((e=>{this._overlays[e.index]=e,this._updateImageExtent(e)}))}_updateImageExtent(e){const t=this._clippedExtent(e.extent,W);if(s(t))return;const i=j(e.extent,t,e.resolution);let r=e.pixelRatio*this.view.pixelRatio;if(\"imageMaxWidth\"in this.layer||\"imageMaxHeight\"in this.layer){const e=this.layer.imageMaxWidth,t=this.layer.imageMaxHeight;if(i.width>e){const t=e/i.width;i.height=Math.floor(i.height*t),i.width=e,r*=t}if(i.height>t){const e=t/i.height;i.width=Math.floor(i.width*e),i.height=t,r*=e}}const a=this._extents[e.index];a&&w(a.extent,t)&&this._imageSizeEquals(t,a.imageSize,i)||(this._extents[e.index]={extent:x(t),imageSize:i,pixelRatio:r},this.suspended||this._fetch(e.index).catch((e=>{o(e)||z.error(e)})))}clear(){for(let e=0;e<this._images.length;e++)this._clearImage(e)}async doRefresh(){return this._doRefresh()}async _doRefresh(e){if(this.suspended)return;const t=[];for(let i=0;i<this._extents.length;i++)this._extents[i]&&t.push(this._fetch(i,e));await l(t)}canResume(){if(!super.canResume())return!1;const e=this.layer;if(this._isScaleRangeActive()){const{minScale:t,maxScale:i}=e.effectiveScaleRange,r=this.view.scale;if(r<i||t>0&&r>t)return!1}return!0}isUpdating(){return this._images.some((e=>!!e.loadingPromise))}async processResult(e,t,i){(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)&&(e.image=t)}findExtentInfoAt(e){for(const t of this._extents){const i=t.extent;if(new y(i[0],i[1],i[2],i[3],this._spatialReference).contains(e))return t}return null}getFetchOptions(){}async redraw(e,i){await t(this._images,(async(t,r)=>{t&&(await e(t,i),await this._createStageObjects(r,t.image,i))}))}_imageSizeEquals(e,t,i){if(!this.maximumDataResolution)return!1;const r=_(e)/this.maximumDataResolution.x,s=v(e)/this.maximumDataResolution.y,a=r/t.width,n=s/t.height,o=r/i.width,l=s/i.height,h=Math.abs(a-o),m=Math.abs(n-l),c=D.TESTS_DISABLE_OPTIMIZATIONS?0:1.5;return h<=c&&m<=c}async _fetch(e,t){if(this.suspended)return;const i=this._extents[e],r=i.extent;this._images[e]||(this._images[e]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:x(r)});const s=this._images[e];s.loadingAbortController&&(s.loadingAbortController.abort(),s.loadingAbortController=null);const a=new y(r[0],r[1],r[2],r[3],this._spatialReference);if(0===a.width||0===a.height)return void this._clearImage(e);const n=new AbortController;s.loadingAbortController=n,h(t,(()=>n.abort()));const l=n.signal,g=this._waitFetchReady(l).then((()=>{const t={requestAsImageElement:!0,pixelRatio:this._overlays[e].pixelRatio,...this.getFetchOptions(),signal:l},{height:r,width:s}=i.imageSize;return this.layer.fetchImage(a,s,r,t)})).then((e=>{if(m(l))throw z.warnOnce(\"A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true.\"),c();return this.processResult(s,e)})).then((()=>R(s.renderExtent,r)));s.loadingPromise=g,d(g,(()=>{g===s.loadingPromise&&(s.loadingPromise=null,s.loadingAbortController=null)})),this.notifyChange(\"updating\"),await g.then((async()=>{if(l.aborted)throw c();await this._createStageObjects(e,s.image,l),this.notifyChange(\"updating\")})).catch((e=>{throw e&&!o(e)&&z.error(e),this.notifyChange(\"updating\"),e}))}_clearImage(e){const t=this._images[e];if(t){a(t.renderGeometry)&&(this.view.basemapTerrain.overlayManager.renderer.removeGeometries([t.renderGeometry],this,M.Geometry.UPDATE),t.renderGeometry=null);const e=this.view._stage;e.remove(t.texture),t.texture=null,e.remove(t.material),t.material=null,t.loadingAbortController&&(t.loadingAbortController.abort(),t.loadingAbortController=null),t.loadingPromise=null,t.image=null,t.pixelData=null}}async _createStageObjects(e,t,r){const n=this.view._stage,o=this._images[e],l=this.view.basemapTerrain.overlayManager.renderer,h=()=>{n.remove(o.texture),o.texture=null,a(o.renderGeometry)&&(l.removeGeometries([o.renderGeometry],this,M.Geometry.UPDATE),o.renderGeometry=null)};if(t){const a=new P(t,{width:t.width,height:t.height,preMultiplyAlpha:!0,wrap:{s:N.CLAMP_TO_EDGE,t:N.CLAMP_TO_EDGE}});let m;if(await i(this._images[e===L.INNER?L.OUTER:L.INNER].loadingPromise),g(r),e===L.INNER)m=I(o.renderExtent);else{const e=this._images[0].renderExtent;if(!e)return void h();m=A(e,o.renderExtent)}h(),n.add(a),await n.loadImmediate(a),o.texture=a,s(o.material)?(o.material=new O({transparent:!0,textureId:a.id}),n.add(o.material)):o.material.setParameters({textureId:a.id}),o.renderGeometry=new T(m,o.material),o.renderGeometry.origin=this._overlays[e].renderLocalOrigin,l.addGeometries([o.renderGeometry],this,M.Geometry.UPDATE)}else h(),n.remove(o.material),o.material=null}_isScaleRangeLayer(){return\"effectiveScaleRange\"in this.layer}_isScaleRangeActive(){const e=this.layer;if(!this._isScaleRangeLayer())return!1;const{minScale:t,maxScale:i}=e.effectiveScaleRange;return H(t,i)}_clippedExtent(e,t){if(\"local\"!==this.view.viewingMode)return R(t,e);const i=this.view.basemapTerrain;return i.ready?b(e,i.extent,t):R(t,e)}_suspendedChangeHandler(){this.suspended?this.clear():this.refreshDebounced()}async _waitFetchReady(e){await u(this.view,\"stationary\",e),g(e)}};e([p()],F.prototype,\"layer\",void 0),e([p()],F.prototype,\"suspended\",void 0),e([p({readOnly:!0})],F.prototype,\"fullExtentInLocalViewSpatialReference\",void 0),e([p()],F.prototype,\"updating\",void 0),F=e([f(\"esri.views.3d.layers.DynamicLayerView3D\")],F);const q=F,W=x();export{q as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as r}from\"../../../../core/maybe.js\";import{project as o}from\"../../../../geometry/support/webMercatorUtils.js\";import{projectGeometry as t}from\"../../../../portal/support/geometryServiceUtils.js\";function l(l){const s=l.view.spatialReference,i=l.layer.fullExtent,n=e(i)&&i.spatialReference;if(r(i)||!n)return Promise.resolve(null);if(n.equals(s))return Promise.resolve(i.clone());const a=o(i,s);return e(a)?Promise.resolve(a):l.view.state.isLocal?t(i,s,l.layer.portalItem).then((e=>!l.destroyed&&e?e:void 0)).catch((()=>null)):Promise.resolve(null)}export{l as toViewIfLocal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ShaderOutput as t}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{bindSliceUniformsWithOrigin as r}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindMultipassTerrainTexture as i}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as s,bindView as o}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as a}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as n}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as l,ShaderTechniqueConfiguration as p}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{CullFaceOptions as c,TransparencyPassType as u}from\"../lib/basicInterfaces.js\";import{Default3D as d}from\"../lib/DefaultVertexAttributeLocations.js\";import{oitBlending as m,oitDepthTest as h,oitDepthWrite as b,getOITPolygonOffset as f}from\"../lib/OrderIndependentTransparency.js\";import{Program as g}from\"../lib/Program.js\";import{stencilWriteMaskOn as y,stencilToolMaskBaseParams as T,stencilBaseAllZerosParams as P}from\"../lib/StencilUtils.js\";import{I as j}from\"../../../../chunks/ImageMaterial.glsl.js\";import{BlendFactor as v}from\"../../../webgl/enums.js\";import{simpleBlendingParams as O,makePipelineState as S,cullingParams as E,defaultDepthWriteParams as w,defaultColorWriteParams as N}from\"../../../webgl/renderState.js\";class _ extends n{initializeProgram(e){const t=_.shader.get(),r=this.configuration,i=t.build({output:r.output,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,oitEnabled:r.transparencyPassType===u.Color,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new g(e.rctx,i,d)}bindPass(e,t){s(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"opacity\",e.opacity),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"nearFar\",t.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",t.inverseViewport),i(this.program,t))}bindDraw(e){o(this.program,e),r(this.program,this.configuration,e),this.program.rebindTextures()}_setPipelineState(e,r){const i=this.configuration,s=e===u.NONE,o=e===u.FrontFace;return S({blending:i.output!==t.Color&&i.output!==t.Alpha||!i.transparent?null:s?x:m(e),culling:E(i.cullFace),depthTest:{func:h(e)},depthWrite:s?i.writeDepth&&w:b(e),colorWrite:N,stencilWrite:i.sceneHasOcludees?y:null,stencilTest:i.sceneHasOcludees?r?T:P:null,polygonOffset:s||o?null:f(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e,t){return t?this._occludeePipelineState:super.getPipelineState(e,t)}}_.shader=new a(j,(()=>import(\"./ImageMaterial.glsl.js\")));const x=O(v.ONE,v.ONE_MINUS_SRC_ALPHA);class A extends p{constructor(){super(...arguments),this.output=t.Color,this.cullFace=c.None,this.slicePlaneEnabled=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparencyPassType=u.NONE,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([l({count:t.COUNT})],A.prototype,\"output\",void 0),e([l({count:c.COUNT})],A.prototype,\"cullFace\",void 0),e([l()],A.prototype,\"slicePlaneEnabled\",void 0),e([l()],A.prototype,\"transparent\",void 0),e([l()],A.prototype,\"enableOffset\",void 0),e([l()],A.prototype,\"writeDepth\",void 0),e([l()],A.prototype,\"sceneHasOcludees\",void 0),e([l({count:u.COUNT})],A.prototype,\"transparencyPassType\",void 0),e([l()],A.prototype,\"multipassTerrainEnabled\",void 0),e([l()],A.prototype,\"cullAboveGround\",void 0);export{_ as ImageMaterialTechnique,A as ImageMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{CullFaceOptions as t}from\"../lib/basicInterfaces.js\";import{outputFromPass as r}from\"../lib/GLMaterials.js\";import i from\"../lib/GLMaterialTexture.js\";import{DefaultMaterialParameters as a,Material as s}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as n}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as u}from\"../lib/RenderSlot.js\";import{DefaultBufferWriter as l,PositionUVLayout as o}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as c}from\"./internal/MaterialUtil.js\";import{ImageMaterialTechniqueConfiguration as h,ImageMaterialTechnique as p}from\"../shaders/ImageMaterialTechnique.js\";class m extends s{constructor(e){super(e,f),this.supportsEdges=!0,this.techniqueConfig=new h}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.parameters.cullFace,this.techniqueConfig.slicePlaneEnabled=this.parameters.slicePlaneEnabled,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.sceneHasOcludees=this.parameters.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t.transparencyPassType,this.techniqueConfig.enableOffset=t.camera.relativeElevation<n,this.techniqueConfig.multipassTerrainEnabled=t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=t.cullAboveGround,this.techniqueConfig}intersect(e,t,r,i,a,s,n){c(e,t,i,a,s,void 0,n)}requiresSlot(t,i){if(t===u.DRAPED_MATERIAL)return!0;if(r(i)===e.Highlight)return t===u.OPAQUE_MATERIAL;return t===(this.parameters.transparent?this.parameters.writeDepth?u.TRANSPARENT_MATERIAL:u.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:u.OPAQUE_MATERIAL)}createGLMaterial(t){return t.output===e.Color||t.output===e.Alpha||t.output===e.Highlight?new d(t):void 0}createBufferWriter(){return new l(o)}}class d extends i{constructor(e){super({...e,...e.material.parameters})}updateParameters(e){const t=this._material.parameters;return this.updateTexture(t.textureId),this.ensureTechnique(p,e)}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.sceneHasOcludees&&(this._material.setParameters({sceneHasOcludees:e.hasOccludees}),this.updateParameters(e))}beginSlot(t){return this._output!==e.Color&&this._output!==e.Alpha||this._updateOccludeeState(t),this.updateParameters(t)}bind(e,t){this.bindTextures(t.program),this.bindTextureScale(t.program),t.bindPass(this._material.parameters,e)}}const f={transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:t.None,sceneHasOcludees:!1,opacity:1,textureId:null,initTextureTransparent:!0,...a};export{m as ImageMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n"],"names":["g","p","s","include","a","linearDepth","vertex","uniforms","add","attributes","n","varyings","multipassTerrainEnabled","code","l","r","fragment","i","o","output","e","t","d","oitEnabled","Object","freeze","__proto__","build","h","z","F","V","E","U","constructor","super","arguments","this","drapeSourceType","S","updatePolicy","G","fullExtentInLocalViewSpatialReference","maximumDataResolution","_images","Array","_extents","_overlays","updateWhenStationary","refreshDebounced","async","destroyed","_doRefresh","catch","declaredClass","error","initialize","addResolvingPromise","C","then","_set","updatingHandles","suspended","_suspendedChangeHandler","handles","view","resourceController","scheduler","registerIdleStateCallbacks","_isScaleRangeActive","notifyChange","_isScaleRangeLayer","layer","effectiveScaleRange","destroy","clear","setDrapingExtent","_spatialReference","forEach","index","_updateImageExtent","_clippedExtent","extent","W","width","height","Math","round","j","resolution","pixelRatio","imageMaxWidth","imageMaxHeight","floor","w","_imageSizeEquals","imageSize","x","_fetch","length","_clearImage","push","canResume","minScale","maxScale","scale","isUpdating","some","loadingPromise","HTMLImageElement","HTMLCanvasElement","image","findExtentInfoAt","y","contains","getFetchOptions","_createStageObjects","_","v","abs","m","c","D","texture","material","renderGeometry","loadingAbortController","pixelData","renderExtent","abort","AbortController","signal","_waitFetchReady","requestAsImageElement","fetchImage","warnOnce","processResult","R","aborted","basemapTerrain","overlayManager","renderer","removeGeometries","M","_stage","remove","P","preMultiplyAlpha","wrap","N","L","I","min","max","u","Float64Array","f","Float32Array","Uint32Array","b","A","size","data","exclusive","loadImmediate","O","transparent","textureId","id","setParameters","T","origin","renderLocalOrigin","addGeometries","H","viewingMode","ready","prototype","readOnly","q","spatialReference","fullExtent","Promise","resolve","equals","clone","state","isLocal","portalItem","initializeProgram","shader","get","configuration","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","transparencyPassType","cullAboveGround","rctx","bindPass","program","camera","projectionMatrix","setUniform1f","opacity","setUniform2fv","nearFar","inverseViewport","bindDraw","rebindTextures","_setPipelineState","blending","culling","cullFace","depthTest","func","depthWrite","writeDepth","colorWrite","stencilWrite","sceneHasOcludees","stencilTest","polygonOffset","enableOffset","initializePipeline","_occludeePipelineState","getPipelineState","count","supportsEdges","techniqueConfig","getTechniqueConfig","parameters","relativeElevation","intersect","requiresSlot","createGLMaterial","createBufferWriter","updateParameters","_material","updateTexture","ensureTechnique","_updateOccludeeState","hasOccludees","beginSlot","_output","bind","bindTextures","bindTextureScale","initTextureTransparent","doRefresh","dataChanged"],"sourceRoot":""}