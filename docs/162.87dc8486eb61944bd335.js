(function(){var t={"esri/views/3d/layers/PointCloudWorker":1346},e=this||window,r=e.webpackJsonp=e.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(t):(r.absMidsWaiting=r.absMidsWaiting||[]).push(t)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{1346:function(t,e,r){var a,i;a=[r.dj.c(t.i),e,r(2),r(4),r(101),r(245),r(702),r(6),r(133),r(40),r(1748),r(36)],void 0===(i=function(t,e,r,a,i,n,o,u,f,s,l,b){Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function t(){}return t.prototype.transform=function(t){var e=this._transform(t),n=[e.points.buffer,e.rgb.buffer];r.isSome(e.pointIdFilterMap)&&n.push(e.pointIdFilterMap.buffer);for(var o=0,u=e.attributes;o<u.length;o++){var f=u[o];"buffer"in f.values&&i.isArrayBuffer(f.values.buffer)&&f.values.buffer!==e.rgb.buffer&&n.push(f.values.buffer)}return a.resolve({result:e,transferList:n})},t.prototype._transform=function(t){var e=l.readGeometry(t.schema,t.geometryBuffer),a=e.length/3,i=null,n=[],o=l.getAttributeValues(t.primaryAttributeData,e,a);r.isSome(t.primaryAttributeData)&&o&&n.push({attributeInfo:t.primaryAttributeData.attributeInfo,values:o});var u=l.getAttributeValues(t.modulationAttributeData,e,a);r.isSome(t.modulationAttributeData)&&u&&n.push({attributeInfo:t.modulationAttributeData.attributeInfo,values:u});var f=l.evaluateRenderer(t.rendererInfo,o,u,a);if(t.filterInfo&&t.filterInfo.length>0&&r.isSome(t.filterAttributesData)){var b=t.filterAttributesData.map((function(t){var r=l.getAttributeValues(t,e,a),i={attributeInfo:t.attributeInfo,values:r};return n.push(i),i}));i=new Uint32Array(a),a=l.filterInPlace(e,f,i,t.filterInfo,b)}for(var p=0,v=t.userAttributesData;p<v.length;p++){var c=v[p],h=l.getAttributeValues(c,e,a);n.push({attributeInfo:c.attributeInfo,values:h})}3*a<f.length&&(f=new Uint8Array(f.buffer.slice(0,3*a))),this._applyElevationOffsetInPlace(e,a,t.elevationOffset);var m=this._transformCoordinates(e,a,t.obb,s.fromJSON(t.inSR),s.fromJSON(t.outSR));return{obb:t.obb,points:m,rgb:f,attributes:n,pointIdFilterMap:i}},t.prototype._transformCoordinates=function(t,e,r,a,i){if(!b.bufferToBuffer(t,a,0,t,i,0,e))throw Error("Can't reproject");var o=f.vec3f32.fromValues(r.center[0],r.center[1],r.center[2]),s=f.vec3f32.create(),l=f.vec3f32.create();n.quat.conjugate(v,r.quaternion);for(var p=new Float32Array(3*e),c=0;c<e;c++)s[0]=t[3*c]-o[0],s[1]=t[3*c+1]-o[1],s[2]=t[3*c+2]-o[2],u.vec3.transformQuat(l,s,v),r.halfSize[0]=Math.max(r.halfSize[0],Math.abs(l[0])),r.halfSize[1]=Math.max(r.halfSize[1],Math.abs(l[1])),r.halfSize[2]=Math.max(r.halfSize[2],Math.abs(l[2])),p[3*c]=s[0],p[3*c+1]=s[1],p[3*c+2]=s[2];return p},t.prototype._applyElevationOffsetInPlace=function(t,e,r){if(0!==r)for(var a=0;a<e;a++)t[3*a+2]+=r},t}(),v=o.quatf32.create();e.default=function(){return new p}}.apply(null,a))||(t.exports=i)}}]);