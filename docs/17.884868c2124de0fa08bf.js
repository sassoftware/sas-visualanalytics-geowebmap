(function(){var e={"esri/layers/graphics/data/projectionSupport":1397,"esri/views/layers/support/popupUtils":1398,"esri/renderers/support/clickToleranceUtils":1404,"esri/geometry/projection":1413,"esri/views/support/drapedUtils":1418,"esri/geometry/geometryAdapters/json":1426,"esri/geometry/pe":1439,"esri/geometry/support/GeographicTransformation":1440,"esri/geometry/support/GeographicTransformationStep":1441,"esri/layers/support/rasterFunctions/rasterProjectionHelper":1491,"esri/views/layers/ImageryTileLayerView":1767},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1397:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(0),r(11),r(4),r(1413),r(1426),r(76),r(46)],void 0===(o=function(e,t,r,n,o,i,a,s,p){Object.defineProperty(t,"__esModule",{value:!0});var u=[0,0];function _(e,t){var r,n,o;if(!t)return null;if("x"in t){var i={x:0,y:0};return r=e(t.x,t.y,u),i.x=r[0],i.y=r[1],null!=t.z&&(i.z=t.z),null!=t.m&&(i.m=t.m),i}return"xmin"in t?(i={xmin:0,ymin:0,xmax:0,ymax:0},n=e(t.xmin,t.ymin,u),i.xmin=n[0],i.ymin=n[1],o=e(t.xmax,t.ymax,u),i.xmax=o[0],i.ymax=o[1],t.hasZ&&(i.zmin=t.zmin,i.zmax=t.zmax,i.hasZ=!0),t.hasM&&(i.mmin=t.mmin,i.mmax=t.mmax,i.hasM=!0),i):"rings"in t?{rings:l(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:l(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:c(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function l(e,t){for(var r=[],n=0,o=e;n<o.length;n++){var i=o[n];r.push(c(i,t))}return r}function c(e,t){for(var r=[],n=0,o=e;n<o.length;n++){var i=o[n],a=t(i[0],i[1],[0,0]);r.push(a),i.length>2&&a.push(i[2]),i.length>3&&a.push(i[3])}return r}function f(e,t){return!(!s.isValid(e)||!s.isValid(t)||s.equals(e,t)||p.canProject(e,t))}t.doesBrowserSupportProjection=function(e,t){return!f(e,t)||i.isSupported()},t.checkProjectionSupport=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s;return r.__generator(this,(function(r){if(!t)return[2];if(Array.isArray(e)){for(o=0,a=e;o<a.length;o++)if(f((s=a[o]).geometry&&s.geometry.spatialReference,t)){if(i.isSupported())return[2,i.load()];throw new n("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}return[2]}if(!f(e,t))return[2];if(i.isSupported())return[2,i.load()];throw new n("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}))}))};var d=_.bind(null,p.lngLatToXY),P=_.bind(null,p.xyToLngLat);t.project=function(e,t,r){return e?(r||(r=t,t=e.spatialReference),s.isValid(t)&&s.isValid(r)&&!s.equals(t,r)?p.canProject(t,r)?s.isWebMercator(r)?d(e):P(e):i.projectMany(a.jsonAdapter,[e],t,r,null)[0]:e):e};var h=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,a=this;return r.__generator(this,(function(r){return e&&e.length&&t&&n&&!s.equals(t,n)||o.resolve(e),i={geometries:e,inSpatialReference:t,outSpatialReference:n,resolve:null},this._jobs.push(i),[2,o.create((function(e){i.resolve=e,null===a._timer&&(a._timer=setTimeout(a._process,10))}))]}))}))},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference,o=e.resolve;p.canProject(r,n)?s.isWebMercator(n)?o(t.map(d)):o(t.map(P)):o(i.projectMany(a.jsonAdapter,t,r,n,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,h.push(e,t,n)]}))}))}}.apply(null,n))||(e.exports=o)},1398:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(0),r(234),r(2),r(66)],void 0===(o=function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getRequiredFields=function(e,t){return void 0===t&&(t=e.popupTemplate),r.__awaiter(this,void 0,void 0,(function(){var a,s,p,u,_,l,c,f,d;return r.__generator(this,(function(P){switch(P.label){case 0:return o.isSome(t)?[4,t.getRequiredFields(e.fields)]:[2,[]];case 1:return a=P.sent(),s=t.lastEditInfoEnabled,p=e.objectIdField,u=e.typeIdField,_=e.globalIdField,l=e.relationships,n.includes(a,"*")?[2,["*"]]:s?[4,i.getFeatureEditFields(e)]:[3,3];case 2:return f=P.sent(),[3,4];case 3:f=[],P.label=4;case 4:return c=f,d=i.fixFields(e.fields,r.__spreadArrays(a,c)),u&&d.push(u),d&&p&&i.hasField(e.fields,p)&&-1===d.indexOf(p)&&d.push(p),d&&_&&i.hasField(e.fields,_)&&-1===d.indexOf(_)&&d.push(_),l&&l.forEach((function(t){var r=t.keyField;d&&r&&i.hasField(e.fields,r)&&-1===d.indexOf(r)&&d.push(r)})),[2,d]}}))}))},t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:o.isSome(t)&&t.defaultPopupTemplateEnabled&&o.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}.apply(null,n))||(e.exports=o)},1404:function(e,t,r){var n,o;n=[r.dj.c(e.i),t],void 0===(o=function(e,t){function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function n(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,n=0;n<e.length;n++){var o=e[n].size;"number"==typeof o&&(t+=o,r++)}return t/r}(e.stops):t}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){var t=e&&e.renderer,o="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return o;var i="visualVariables"in t?function(e,t){if(!t)return e;var r=t.filter((function(e){return"size"===e.type})).map((function(t){var r=t.maxSize,o=t.minSize;return(n(r,e)+n(o,e))/2})),o=0,i=r.length;if(0===i)return e;for(var a=0;a<i;a++)o+=r[a];var s=Math.floor(o/i);return Math.max(s,e)}(o,t.visualVariables):o;if("simple"===t.type)return r(i,t.symbol);if("unique-value"===t.type){var a=i;return t.uniqueValueInfos.forEach((function(e){a=r(a,e.symbol)})),a}if("class-breaks"===t.type){var s=i;return t.classBreakInfos.forEach((function(e){s=r(s,e.symbol)})),s}return t.type,i}}.apply(null,n))||(e.exports=o)},1413:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(4),r(1439),r(1440),r(14)],void 0===(o=function(e,t,n,o,i){Object.defineProperty(t,"__esModule",{value:!0});var a=null,s=null;t.isLoaded=function(){return!!a&&o.isLoaded()},t.isSupported=function(){return o.isSupported()};var p=null;t.load=function(){return p||(p=n.all([o.load(),new Promise((function(e,t){r.e(8).then(function(){var t=[r(1458)];e.apply(null,t)}.bind(this)).catch(t.bind(this))})),new Promise((function(e,t){r.e(106).then(function(){var t=[r(1483)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))]).then((function(e){var t=e[1],r=e[2].hydratedAdapter;s=r,(a=t)._enableProjection(o)})))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:_(s,e,e[0].spatialReference,t,r):_(s,[e],e.spatialReference,t,r)[0]};var u={};function _(e,t,r,n,o){if(void 0===o&&(o=null),null===o){var s=i.cacheKey(r,n);void 0!==u[s]?o=u[s]:(null===(o=l(r,n,null))&&(o=new i),u[s]=o)}return a._project(e,t,r,n,o)}function l(e,t,r){void 0===r&&(r=null);var n=a._getTransformation(s,e,t,r,null==r?void 0:r.spatialReference);return null!==n?i.fromGE(n):null}t.projectMany=_,t.getTransformation=l,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=a._getTransformationBySuitability(s,e,t,r,null==r?void 0:r.spatialReference);if(null!==n){for(var o=[],p=0,u=n;p<u.length;p++){var _=u[p];o.push(i.fromGE(_))}return o}return[]}}.apply(null,n))||(e.exports=o)},1418:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(28),r(2),r(71),r(1404)],void 0===(o=function(e,t,r,n,o,i){function a(e,t,n,i){var a;if(void 0===i&&(i=new r.Extent),"2d"===n.type)a=t*n.resolution;else if("3d"===n.type){var s=n.basemapTerrain,p=s.overlayManager,u=p?p.overlayPixelSizeInMapUnits(e):1;a=s&&!s.spatialReference.equals(n.spatialReference)?o.getMetersPerUnitForSR(s.spatialReference)/o.getMetersPerUnitForSR(n.spatialReference):t*u}var _=e.x-a,l=e.y-a,c=e.x+a,f=e.y+a,d=n.spatialReference;return i.xmin=Math.min(_,c),i.ymin=Math.min(l,f),i.xmax=Math.max(_,c),i.ymax=Math.max(l,f),i.spatialReference=d,i}Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=a,t.intersectsDrapedGeometry=function(e,t,r){var o=r.toMap(e);return n.isNone(o)?null:a(o,i.calculateTolerance(),r,s).intersects(t)?o:null};var s=new r.Extent}.apply(null,n))||(e.exports=o)},1426:function(e,t,r){var n,o;n=[r.dj.c(e.i),t],void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.jsonAdapter={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,n){var o=new r(e.getPointX(t),e.getPointY(t),n),i=e.hasZ(t),a=e.hasM(t);return i&&(o.z=e.getPointZ(t)),a&&(o.m=e.getPointM(t)),o},exportPolygon:function(e,t,r){return new n(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,r){return new o(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,r){return new i(e.exportPoints(t),r,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,r){var n=e.hasZ(t),o=e.hasM(t),i=new a(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),r);if(n){var s=e.getZExtent(t);i.zmin=s.vmin,i.zmax=s.vmax}if(o){var p=e.getMExtent(t);i.mmin=p.vmin,i.mmax=p.vmax}return i}};var r=function(e,t,r){this.x=e,this.y=t,this.spatialReference=r,this.z=void 0,this.m=void 0},n=function(e,t,r,n){this.rings=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)},o=function(e,t,r,n){this.paths=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)},i=function(e,t,r,n){this.points=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)},a=function(e,t,r,n,o){this.xmin=e,this.ymin=t,this.xmax=r,this.ymax=n,this.spatialReference=o,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}.apply(null,n))||(e.exports=o)},1439:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(0),r(128),r(25),r(4),r(14)],void 0===(o=function(e,t,n,o,i,a){var s,p,u,_,l,c;function f(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,p.init(),u.init(),_.init(),l.init(),c.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var o=0,i=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];o<i.length;o++)r(i[o].prototype,"getName",(function(e){return function(){return e.call(this,new Array(p.PE_NAME_MAX))}}));for(var a=0,s=[t._pe.PeGeogtran,t._pe.PeProjcs];a<s.length;a++)r(s[a].prototype,"getParameters",(function(e){return function(){for(var r=new Array(p.PE_PARM_MAX),n=e.call(this),o=0;o<r.length;o++){var i=t._pe.getValue(n,"*");r[o]=i?t._pe.wrapPointer(i,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}}));r(t._pe.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return y(r,t,e.call(this)),r}})),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,o=e.call(this);if(!t._pe.compare(o,t._pe.NULL)){n=[o];var i=this.getSteps();if(i>1)for(var a=t._pe.getPointer(o),s=1;s<i;s++)n.push(t._pe.wrapPointer(a+r*s,t._pe.PeGTlistExtendedGTs))}return n}}));var f=t._pe._pe_getPeHorizonSize(),d=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,o=e.call(this);if(!t._pe.compare(o,t._pe.NULL)){n=[o];var i=o.getNump();if(i>1)for(var a=t._pe.getPointer(o),s=1;s<i;s++)n.push(t._pe.wrapPointer(a+f*s,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",d),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",d),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=p.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(p.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,n))}}function d(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var o=t._pe.getPointer(e);o&&delete n[o]}}}}function P(e,r){for(var n=[],o=new Array(r),i=0;i<e;i++)n.push(t._pe.ensureInt8(o));return n}function h(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function y(e,r,n,o){if(void 0===o&&(o=!1),o)for(var i=0;i<2*r;i++)e[i]=t._pe.getValue(n+i*Float64Array.BYTES_PER_ELEMENT,"double");else{var a=0===e.length;for(i=0;i<r;i++)a&&(e[i]=new Array(2)),e[i][0]=t._pe.getValue(n,"double"),e[i][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!i("esri-wasm")},t.load=function(){return s||(s=a.create((function(e,t){new Promise((function(e,t){r.e(89).then(function(){var t=[r(1567)];e.apply(null,t)}.bind(this)).catch(t.bind(this))})).then((function(r){r({locateFile:function(e){return o.getAssetUrl("esri/geometry/support/"+e)},onAbort:function(e){t(new Error(e))}}).then((function(t){f(t),e()}))}))})))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var o=h(n),i=n===o,a=t._pe.ensureFloat64(o),s=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,a);return s&&y(n,r,a,i),s}function n(e,t,r){return o(e,t,r,0)}function o(e,r,n,o){t._pe.ensureCache.prepare();var i=h(n),a=n===i,s=t._pe.ensureFloat64(i),p=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,s,o);return p&&y(n,r,s,a),p}e.geogToProj=r,e.projGeog=function(e,t,o,i){switch(i){case p.PE_TRANSFORM_P_TO_G:return n(e,t,o);case p.PE_TRANSFORM_G_TO_P:return r(e,t,o)}return 0},e.projToGeog=n,e.projToGeogCenter=o}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(p=t.PeDefs||(t.PeDefs={})),function(e){var r={},n={};function o(e,n){var o=null,a=r[e];if(a||(a={},r[e]=a),a.hasOwnProperty(String(n)))o=a[n];else{var s=t._pe.PeFactory.prototype.factoryByType(e,n);t._pe.compare(s,t._pe.NULL)||(o=s,a[n]=o)}return i(o)}function i(e){if(e){var r=e.getType();switch(r){case p.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case p.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case p.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&p.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return o(p.PE_TYPE_COORDSYS,e)},e.factoryByType=o,e.fromString=function(e,r){var o=null,a=n[e];if(a||(a={},n[e]=a),a.hasOwnProperty(r))o=a[r];else{var s=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(s,t._pe.NULL)||(o=s,a[r]=o)}return i(o)},e.geogcs=function(e){return o(p.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return o(p.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return o(p.PE_TYPE_PROJCS,e)},e.unit=function(e){return o(p.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,o,i,a,s){var p=null,u=new t._pe.PeInteger(s);try{var _=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,o,i,a,u);if((s=u.val)&&(p=[_],s>1))for(var l=t._pe.getPointer(_),c=1;c<s;c++)p.push(t._pe.wrapPointer(l+r*c,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(u)}return p}}(u=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){e.destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var o=n[r];d(o),o.getEntries().forEach((function(e){d(e);var t=e.getGeogtran();d(t),t.getParameters().forEach(d),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){d(e);var t=e.getDatum();d(t),d(t.getSpheroid()),d(e.getPrimem()),d(e.getUnit())}))}))}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})),function(e){e.geogToGeog=function(e,r,n,o,i){t._pe.ensureCache.prepare();var a=h(n),s=n===a,p=t._pe.ensureFloat64(a),u=0;o&&(u=t._pe.ensureFloat64(o));var _=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,p,u,i);return _&&y(n,r,p,s),_}}(t.PeGTTransformations||(t.PeGTTransformations={})),function(e){function r(e,r,n,o,i,a){var s,u;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_geog_to_dd,u=p.PE_DD_MAX;break;case"ddm":s=t._pe._pe_geog_to_ddm,u=p.PE_DDM_MAX;break;case"dms":s=t._pe._pe_geog_to_dms,u=p.PE_DMS_MAX}var _=0;r&&(_=t._pe.getPointer(r));var l=h(o),c=t._pe.ensureFloat64(l),f=P(n,u),d=s(_,n,c,i,t._pe.ensureInt32(f));if(d)for(var y=0;y<n;y++)a[y]=t._pe.UTF8ToString(f[y]);return d}function n(e,r,n,o,i){var a;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_dd_to_geog;break;case"ddm":a=t._pe._pe_ddm_to_geog;break;case"dms":a=t._pe._pe_dms_to_geog}var s=0;r&&(s=t._pe.getPointer(r));var p=o.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(p),_=t._pe.ensureFloat64(new Array(2*n)),l=a(s,n,u,_);return l&&y(i,n,_),l}e.geog_to_dms=function(e,t,n,o,i){return r("dms",e,t,n,o,i)},e.dms_to_geog=function(e,t,r,o){return n("dms",e,t,r,o)},e.geog_to_ddm=function(e,t,n,o,i){return r("ddm",e,t,n,o,i)},e.ddm_to_geog=function(e,t,r,o){return n("ddm",e,t,r,o)},e.geog_to_dd=function(e,t,n,o,i){return r("dd",e,t,n,o,i)},e.dd_to_geog=function(e,t,r,o){return n("dd",e,t,r,o)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,o,i,a,s){t._pe.ensureCache.prepare();var u=0;e&&(u=t._pe.getPointer(e));var _=h(n),l=t._pe.ensureFloat64(_),c=P(r,p.PE_MGRS_MAX),f=t._pe.ensureInt32(c),d=t._pe._pe_geog_to_mgrs_extended(u,r,l,o,i,a,f);if(d)for(var y=0;y<r;y++)s[y]=t._pe.UTF8ToString(c[y]);return d},e.mgrs_to_geog_extended=function(e,r,n,o,i){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),p=t._pe.ensureInt32(s),u=t._pe.ensureFloat64(new Array(2*r)),_=t._pe._pe_mgrs_to_geog_extended(a,r,p,o,u);return _&&y(i,r,u),_}}(_=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,o,i,a,s){t._pe.ensureCache.prepare();var u=0;e&&(u=t._pe.getPointer(e));var _=h(n),l=t._pe.ensureFloat64(_),c=P(r,p.PE_MGRS_MAX),f=t._pe.ensureInt32(c),d=t._pe._pe_geog_to_usng(u,r,l,o,i,a,f);if(d)for(var y=0;y<r;y++)s[y]=t._pe.UTF8ToString(c[y]);return d},e.usng_to_geog=function(e,r,n,o){t._pe.ensureCache.prepare();var i=0;e&&(i=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),s=t._pe.ensureInt32(a),p=t._pe.ensureFloat64(new Array(2*r)),u=t._pe._pe_usng_to_geog(i,r,s,p);return u&&y(o,r,p),u}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,o,i){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=h(n),u=t._pe.ensureFloat64(s),_=P(r,p.PE_UTM_MAX),l=t._pe.ensureInt32(_),c=t._pe._pe_geog_to_utm(a,r,u,o,l);if(c)for(var f=0;f<r;f++)i[f]=t._pe.UTF8ToString(_[f]);return c},e.utm_to_geog=function(e,r,n,o,i){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),p=t._pe.ensureInt32(s),u=t._pe.ensureFloat64(new Array(2*r)),_=t._pe._pe_utm_to_geog(a,r,p,o,u);return _&&y(i,r,u),_}}(l=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,o){var i,a;return void 0===o&&(o=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(a=r.get(n))[o]&&(i=a[o]),i||(i=t._pe.PePCSInfo.prototype.generate(n,o),a||(a=[],r.set(n,a)),a[o]=i),i}}(c=t.PePCSInfo||(t.PePCSInfo={})),function(e){e.version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(t.PeVersion||(t.PeVersion={})),t._init=f}.apply(null,n))||(e.exports=o)},1440:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(1441)],void 0===(o=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var o=n[t];o instanceof r?this.steps.push(o):this.steps.push(new r({wkid:o.wkid,wkt:o.wkt,isInverse:o.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,o="",i=0,a=t.steps;i<a.length;i++){var s=a[i],p=r.fromGE(s);n.steps.push(p),o+=p.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=o,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",o=0,i=this.steps;o<i.length;o++)n+=i[o].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var a=this._cached_projection[e.cacheKey(t,r)];return void 0===a?null:a},e}()}.apply(null,n))||(e.exports=o)},1441:function(e,t,r){var n,o;n=[r.dj.c(e.i),t],void 0===(o=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=o)},1491:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(0),r(28),r(11),r(1413),r(76),r(46)],void 0===(o=function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0});var p=function(e,t){var r=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||r)};t.defaultGridSpacing=32,t.load=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return i.isLoaded()||!i.isSupported()?[2,null]:[4,i.load()];case 1:return e.sent(),[2]}}))}))},t.projectResolution=function(e,t,r,a){if(void 0===a&&(a=null),e.spatialReference.equals(t))return e;var u=p(e.spatialReference,t);if(u&&!i.isLoaded())throw new o("rasterprojectionhelper-projectResolution","projection engine is not loaded");var _=r.center,l=new n.Extent({xmin:_.x-e.x/2,xmax:_.x+e.x/2,ymin:_.y-e.y/2,ymax:_.y+e.y/2,spatialReference:e.spatialReference}),c=u?i.project(l,t,a):s.project(l,t);return null==c?null:new n.Point(c.xmax-c.xmin,c.ymax-c.ymin,t)},t.projectPoint=function(e,t,r){if(void 0===r&&(r=null),e.spatialReference.equals(t))return e;var n=p(e.spatialReference,t);if(n&&!i.isLoaded())throw new o("rasterprojectionhelper-projectResolution","projection engine is not loaded");return n?i.project(e,t,r):s.project(e,t)},t.projectExtent=function(e,t,r){if(void 0===r&&(r=null),e.spatialReference.equals(t))return e;var n=p(e.spatialReference,t);if(n&&!i.isLoaded())throw new o("rasterprojectionhelper-projectExtent","projection engine is not loaded");return n?i.project(e,t,r):s.project(e,t)},t.getProjectionOffsetGrid=function(e,r,u,_,l,c){void 0===_&&(_=null),void 0===l&&(l=!1),void 0===c&&(c=[t.defaultGridSpacing,t.defaultGridSpacing]);var f=r.spatialReference.equals(e.spatialReference),d=p(e.spatialReference,r.spatialReference);if(d&&!i.isLoaded())throw new o("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&r&&u))return null;for(var P,h,y,g=e.xmin,v=e.ymin,E=e.xmax,m=e.ymax,T=e.spatialReference,S=r.spatialReference,M=a.getInfo(T),w=M&&M.valid[0],x=M&&M.valid[1],O={x:c[0]*u.x,y:c[1]*u.y},R={cols:Math.ceil((E-g)/O.x-.1)+1,rows:Math.ceil((m-v)/O.y-.1)+1},N=O.x,j=O.y,A=[],b=!1,G=0;G<R.cols;G++){for(var I=[],F=0;F<R.rows;F++)P=new n.Point({x:g+N*G,y:m-j*F,spatialReference:T}),h=f?P:d?i.project(P,S,_):s.project(P,S),I.push(h),G>0&&l&&h&&y[F]&&M&&h.x<y[F].x&&(h.x+=x-w),h?(A.push((h.x-r.xmin)/(r.xmax-r.xmin)),A.push((r.ymax-h.y)/(r.ymax-r.ymin))):(A.push(NaN),A.push(NaN),b=!0);y=I}var D=function(e,t){var r=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,n=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs(r-e[2*t.rows+2]),Math.abs(n-e[2*t.rows+3])]}(A,R),C=new Float32Array((R.cols-1)*(R.rows-1)*2*6),L=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),U=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(G=0;G<R.cols-1;G++){for(F=0;F<R.rows-1;F++){for(var k=G*R.rows*2+2*F,Y=A[k],z=A[k+1],X=A[k+2],Z=A[k+3],V=A[k+=2*R.rows],q=A[k+1],H=A[k+2],B=A[k+3],W=0,J=12*(F*(R.cols-1)+G),K=0;K<3;K++)C[J++]=L[W++]*Y+L[W++]*X+L[W++]*H;for(W=0,K=0;K<3;K++)C[J++]=L[W++]*z+L[W++]*Z+L[W++]*B;for(W=0,K=0;K<3;K++)C[J++]=U[W++]*Y+U[W++]*V+U[W++]*H;for(W=0,K=0;K<3;K++)C[J++]=U[W++]*z+U[W++]*q+U[W++]*B}if(b)for(var Q=0;Q<C.length;Q++)isNaN(C[Q])&&(C[Q]=-1)}return{offsets:A,error:D,coefficients:C,spacing:c,size:[R.cols-1,R.rows-1]}},t.snapPyramid=function(e,t,r){var o=Math.log(e.x/t.pixelSize.x)/Math.LN2,i=Math.log(e.y/t.pixelSize.y)/Math.LN2,a=t.storageInfo.maximumPyramidLevel||0,s="down"===r?Math.floor(Math.min(o,i)):"up"===r?Math.ceil(Math.max(o,i)):Math.round((o+i)/2),p=!1;s<0?s=0:s>a&&(p=s>a+3,s=a);var u=Math.pow(2,s);return{pyramidLevel:s,pyramidResolution:new n.Point({x:u*t.pixelSize.x,y:u*t.pixelSize.y,spatialReference:t.spatialReference}),excessiveReading:p}}}.apply(null,n))||(e.exports=o)},1767:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(0),r(91),r(11),r(2),r(4),r(1),r(1397),r(1491),r(1398)],void 0===(o=function(e,t,r,n,o,i,a,s,p,u,_){Object.defineProperty(t,"__esModule",{value:!0}),t.ImageryTileLayerView=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layer=null,t.view=null,t.fullExtent=null,t.tileInfo=null,t._rasterFieldPrefix="Raster.",t.datumTransformation=null,t}return r.__extends(t,e),Object.defineProperty(t.prototype,"hasTilingEffects",{get:function(){return this.layer.renderer&&"dynamicRangeAdjustment"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment},enumerable:!0,configurable:!0}),t.prototype.fetchPopupFeatures=function(e,t){var s,p;return r.__awaiter(this,void 0,void 0,(function(){var u,l,c,f,d,P,h,y,g,v,E,m,T;return r.__generator(this,(function(r){switch(r.label){case 0:if(u=this.layer,!e)return[2,a.reject(new o("imageryTileLayerView:fetchPopupFeatures","Nothing to fetch without area",{layer:u}))];if(l=u.popupEnabled,c=_.getFetchPopupTemplate(u,t),!l||!i.isSome(c))throw new o("imageryTileLayerView:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:l,popupTemplate:c});return f=[],[4,u.identify(e)];case 1:if(d=r.sent().value){if(P=d.join(", "),(h={ObjectId:0})["Raster.ServicePixelValue"]=this._formatAttributeValue(P,"Raster.ServicePixelValue"),(y=null===(p=null===(s=u.rasterInfo)||void 0===s?void 0:s.attributeTable)||void 0===p?void 0:p.features)&&y.length>0&&(g=y.filter((function(e){var t=e.attributes.value||e.attributes.Value||e.attributes.VALUE;return String(t)===P}))).length>0&&(v=g[0]))for(E in v.attributes)v.attributes.hasOwnProperty(E)&&(m=this._rasterFieldPrefix+E,h[m]=this._formatAttributeValue(v.attributes[E],m));(T=new n(this.fullExtent.clone(),null,h)).layer=u,T.sourceLayer=T.layer,f.push(T)}return[2,f]}}))}))},t.prototype.updateFullExtent=function(){var e,t=this.layer.tileInfo;t&&t.spatialReference||(e=new o("layerview:tiling-information-missing","The layer doesn't provide tiling information",{layer:this.layer}));var r=this.view.spatialReference;if(p.doesBrowserSupportProjection(r,this.layer.spatialReference)){var n=u.projectExtent(this.layer.fullExtent,r,this.datumTransformation);null==n&&(e=new o("layerview:projection-not-supported","The layer extent cannot be projected to the view's spatial reference",{layer:this.layer})),this._set("fullExtent",n)}else e=new o("layerview:projection-not-supported","The layer requires projection engine, which is not supported in current browser",{layer:this.layer});return e?a.reject(e):a.resolve()},t.prototype._formatAttributeValue=function(e,t){if("string"==typeof e){var r=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,n=this._getFieldInfo(r,t),o=n&&n.format;if(o){var i=void 0,a=void 0;return e.trim().indexOf(",")>-1?(a=(i=",")+" ",this._formatDelimitedString(e,i,a,o)):e.trim().indexOf(" ")>-1?(i=a=" ",this._formatDelimitedString(e,i,a,o)):this._formatNumberFromString(e,o)}}return e},t.prototype._getFieldInfo=function(e,t){if(e&&e.length&&t){var r=t.toLowerCase(),n=void 0;return e.some((function(e){return!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,"_")||(n=e,0))})),n}},t.prototype._formatDelimitedString=function(e,t,r,n){var o=this;return e&&t&&r&&n?e.trim().split(t).map((function(e){return o._formatNumberFromString(e,n)})).join(r):e},t.prototype._formatNumberFromString=function(e,t){if(!e||!t)return e;var r=Number(e);return isNaN(r)?e:t.format(r)},r.__decorate([s.property()],t.prototype,"layer",void 0),r.__decorate([s.property()],t.prototype,"view",void 0),r.__decorate([s.property()],t.prototype,"fullExtent",void 0),r.__decorate([s.property()],t.prototype,"tileInfo",void 0),r.__decorate([s.property()],t.prototype,"_rasterFieldPrefix",void 0),r.__decorate([s.property({readOnly:!0,dependsOn:["layer.renderer"]})],t.prototype,"hasTilingEffects",null),r.__decorate([s.subclass("esri.views.layers.ImageryTileLayerView")],t)}(e)}}.apply(null,n))||(e.exports=o)}}]);