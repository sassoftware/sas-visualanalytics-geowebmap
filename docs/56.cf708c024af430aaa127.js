(function(){var e={"esri/layers/graphics/sources/geojson/GeoJSONSourceWorker":1341,"esri/core/libs/quickselect/quickselect":1409,"esri/core/libs/rbush/rbush":1414,"esri/layers/graphics/data/FeatureStore":1427,"esri/layers/graphics/data/executeTileQuery":1433,"esri/layers/graphics/data/BoundsStore":1443,"esri/layers/graphics/sources/support/clientSideDefaults":1470,"esri/layers/graphics/sources/geojson/geojson":1646,"esri/layers/graphics/sources/support/sourceUtils":1647},t=this||window,n=t.webpackJsonp=t.webpackJsonp||[];n.registerAbsMids?n.registerAbsMids(e):(n.absMidsWaiting=n.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{1341:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(0),n(33),n(11),n(4),n(29),n(76),n(412),n(1427),n(1397),n(1402),n(1646),n(1470),n(1647),n(413),n(440),n(66)],void 0===(i=function(e,t,n,r,i,o,s,a,u,l,d,c,h,f,p,y,m,g){Object.defineProperty(t,"__esModule",{value:!0});var v={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}},_=function(){function e(){this._queryEngine=null}return e.prototype.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null},e.prototype.load=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,o,s,p,_,b,I,x,F,B,j,w,M,E,S,T,P,O,Y,q,X,G,R,D,k,A;return n.__generator(this,(function(N){switch(N.label){case 0:return t=[],[4,this._checkProjection(e.spatialReference)];case 1:return N.sent(),o=null,e.url?[4,r(e.url,{responseType:"json"})]:[3,4];case 2:return s=N.sent(),o=s.data,[4,h.validateGeoJSON(o)];case 3:N.sent(),N.label=4;case 4:if(p=h.inferLayerProperties(o,{geometryType:e.geometryType}),_=e.fields||p.fields||[],b=null!=e.hasZ?e.hasZ:p.hasZ,I=p.geometryType,x=e.objectIdField||("number"===p.objectIdFieldType?p.objectIdFieldName:"OBJECTID")||"OBJECTID",F=e.spatialReference||a.WGS84,B=e.timeInfo,!I)throw new i("geojson-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");for("string"===p.objectIdFieldType&&t.push({name:"geojson-layer:unsupported-id-type",message:"Feature ids are of type string and can't be honored."}),_===p.fields&&p.unknownFields.length>0&&t.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:p.unknownFields}}),x&&(j=null,_.some((function(e){return e.name===x&&(j=e,!0)}))?(j.type="esriFieldTypeOID",j.editable=!1,j.nullable=!1):_.unshift({alias:x,name:x,type:"esriFieldTypeOID",editable:!1,nullable:!1})),w=0,M=_;w<M.length;w++){if(null==(P=M[w]).name&&(P.name=P.alias),null==P.alias&&(P.alias=P.name),!P.name)throw new i("geojson-layer:invalid-field-name","field name is missing",{field:P});if(P.name===x&&(P.type="esriFieldTypeOID"),-1===m.kebabDict.jsonValues.indexOf(P.type))throw new i("geojson-layer:invalid-field-type",'invalid type for field "'+P.name+'"',{field:P})}for(E={},this._requiredFields=[],S=0,T=_;S<T.length;S++)"esriFieldTypeOID"!==(P=T[S]).type&&"esriFieldTypeGlobalID"!==P.type&&(P.editable=null==P.editable||!!P.editable,P.nullable=null==P.nullable||!!P.nullable,O=g.getFieldDefaultValue(P),P.nullable||void 0!==O?E[P.name]=O:this._requiredFields.push(P));if(this._fieldsIndex=new y(_),B&&(B.startTimeField&&((Y=this._fieldsIndex.get(B.startTimeField))?(B.startTimeField=Y.name,Y.type="esriFieldTypeDate"):B.startTimeField=null),B.endTimeField&&((q=this._fieldsIndex.get(B.endTimeField))?(B.endTimeField=q.name,q.type="esriFieldTypeDate"):B.endTimeField=null),B.trackIdField&&((X=this._fieldsIndex.get(B.trackIdField))?B.trackIdField=X.name:(B.trackIdField=null,t.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:B}}))),B.startTimeField||B.endTimeField||(t.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:B}}),B=null)),G={warnings:t,featureErrors:[],layerDefinition:n.__assign(n.__assign({},v),{drawingInfo:f.createDrawingInfo(I),templates:f.createDefaultTemplate(E),extent:null,geometryType:I,objectIdField:x,fields:_,hasZ:!!b,timeInfo:B})},this._queryEngine=new c.default({fields:_,geometryType:I,hasM:!1,hasZ:b,objectIdField:x,spatialReference:F,timeInfo:B,featureStore:new l.default({geometryType:I,hasM:!1,hasZ:b})}),this._createDefaultAttributes=f.createDefaultAttributesFunction(E,x),this._nextObjectId=p.maxObjectId+1,R=h.createOptimizedFeatures(o,{geometryType:I,hasZ:b,objectIdFieldName:"number"===p.objectIdFieldType?x:null}),!a.equals(F,a.WGS84))for(D=0,k=R;D<k.length;D++)(A=k[D]).geometry&&(A.geometry=u.convertFromGeometry(d.project(u.convertToGeometry(A.geometry,I,b,!1),a.WGS84,F)));return this._loadInitialFeatures(G,R),[2,G]}}))}))},e.prototype.applyEdits=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r,i;return n.__generator(this,(function(n){switch(n.label){case 0:return t=this._queryEngine,r=t.spatialReference,i=t.geometryType,[4,o.all([p.loadGeometryEngineForSimplify(r,i),d.checkProjectionSupport(e.adds,r),d.checkProjectionSupport(e.updates,r)])];case 1:return n.sent(),[2,this._applyEdits(e)]}}))}))},e.prototype.queryFeatures=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){return[2,this._queryEngine.executeQuery(e,t.signal)]}))}))},e.prototype.queryFeatureCount=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){return[2,this._queryEngine.executeQueryForCount(e,t.signal)]}))}))},e.prototype.queryObjectIds=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){return[2,this._queryEngine.executeQueryForIds(e,t.signal)]}))}))},e.prototype.queryExtent=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){return[2,this._queryEngine.executeQueryForExtent(e,t.signal)]}))}))},e.prototype._loadInitialFeatures=function(e,t){for(var n=this._queryEngine,r=n.featureStore,i=n.objectIdField,o=[],s=0,a=t;s<a.length;s++){var u=a[s],l=this._createDefaultAttributes(),d=p.mixAttributes(this._fieldsIndex,this._requiredFields,l,u.attributes,!0,e.warnings);d?e.featureErrors.push(d):(this._assignObjectId(l,u.attributes,!0),u.attributes=l,u.objectId=l[i],o.push(u))}if(r.addMany(o),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){var c=this._queryEngine.timeExtent,h=c.start,f=c.end;e.layerDefinition.timeInfo.timeExtent=[h,f]}return e},e.prototype._applyEdits=function(e){var t=e.adds,n=e.updates,r=e.deletes,i={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(i,t),n&&n.length&&this._applyUpdateEdits(i,n),r&&r.length){for(var o=0,s=r;o<s.length;o++){var a=s[o];i.deleteResults.push(p.createFeatureEditSuccessResult(a))}this._queryEngine.featureStore.removeManyById(r)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:i}},e.prototype._applyAddEdits=function(e,t){for(var n=e.addResults,r=this._queryEngine,i=r.geometryType,o=r.hasM,a=r.hasZ,l=r.objectIdField,c=r.spatialReference,h=r.featureStore,f=[],y=0,m=t;y<m.length;y++){var g=m[y];if(g.geometry&&i!==s.getJsonType(g.geometry))n.push(p.createFeatureEditErrorResult("Incorrect geometry type."));else{var v=this._createDefaultAttributes(),_=p.mixAttributes(this._fieldsIndex,this._requiredFields,v,g.attributes);if(_)n.push(_);else{if(this._assignObjectId(v,g.attributes),g.attributes=v,null!=g.uid){var b=g.attributes[l];e.uidToObjectId[g.uid]=b}g.geometry&&(g.geometry=d.project(p.simplify(g.geometry,c),g.geometry.spatialReference,c)),f.push(g),n.push(p.createFeatureEditSuccessResult(g.attributes[l]))}}}h.addMany(u.convertFromFeatures([],f,i,a,o,l))},e.prototype._applyUpdateEdits=function(e,t){for(var n=e.updateResults,r=this._queryEngine,i=r.geometryType,o=r.hasM,a=r.hasZ,l=r.objectIdField,c=r.spatialReference,h=r.featureStore,f=0,y=t;f<y.length;f++){var m=y[f],g=m.attributes,v=m.geometry,_=g&&g[l];if(null!=_)if(h.has(_)){var b=u.convertToFeature(h.getFeature(_),i,a,o);if(v){if(i!==s.getJsonType(v)){n.push(p.createFeatureEditErrorResult("Incorrect geometry type."));continue}b.geometry=d.project(p.simplify(v,c),v.spatialReference,c)}if(g){var I=p.mixAttributes(this._fieldsIndex,this._requiredFields,b.attributes,g);if(I){n.push(I);continue}}h.add(u.convertFromFeature(b,i,a,o,l)),n.push(p.createFeatureEditSuccessResult(_))}else n.push(p.createFeatureEditErrorResult("Feature with object id "+_+" missing"));else n.push(p.createFeatureEditErrorResult("Identifier field "+l+" missing"))}},e.prototype._assignObjectId=function(e,t,n){void 0===n&&(n=!1);var r=this._queryEngine.objectIdField;n&&isFinite(t[r])?e[r]=t[r]:e[r]=this._nextObjectId++},e.prototype._checkProjection=function(e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,d.checkProjectionSupport(a.WGS84,e)];case 1:return t.sent(),[3,3];case 2:throw t.sent(),new i("geojson-layer","Projection not supported");case 3:return[2]}}))}))},e}();t.default=_}.apply(null,r))||(e.exports=i)},1409:function(e,t,n){var r;void 0===(r=function(){"use strict";function e(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function t(e,t){return e<t?-1:e>t?1:0}return function(n,r,i,o,s){!function t(n,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,u=r-i+1,l=Math.log(a),d=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*d*(a-d)/a)*(u-a/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-u*d/a+c)),Math.min(o,Math.floor(r+(a-u)*d/a+c)),s)}var h=n[r],f=i,p=o;for(e(n,i,r),s(n[o],h)>0&&e(n,i,o);f<p;){for(e(n,f,p),f++,p--;s(n[f],h)<0;)f++;for(;s(n[p],h)>0;)p--}0===s(n[i],h)?e(n,i,p):e(n,++p,o),p<=r&&(i=p+1),r<=p&&(o=p-1)}}(n,r,i||0,o||n.length-1,s||t)}}.apply(null,[]))||(e.exports=r)},1414:function(e,t,n){var r,i;r=[n(1409)],void 0===(i=function(e){"use strict";function t(e,n){if(!(this instanceof t))return new t(e,n);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&("function"==typeof n?this.toBBox=n:this._initFormat(n)),this.clear()}function n(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function r(e,t){i(e,0,e.children.length,t,e)}function i(e,t,n,r,i){i||(i=h(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,a=t;a<n;a++)s=e.children[a],o(i,e.leaf?r(s):s);return i}function o(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function s(e,t){return e.minX-t.minX}function a(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function l(e){return e.maxX-e.minX+(e.maxY-e.minY)}function d(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function c(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function h(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function f(t,n,r,i,o){for(var s,a=[n,r];a.length;)(r=a.pop())-(n=a.pop())<=i||(s=n+Math.ceil((r-n)/i/2)*i,e(t,s,n,r,o),a.push(n,s,s,r))}return t.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!c(e,t))return n;for(var i,o,s,a,u=[];t;){for(i=0,o=t.children.length;i<o;i++)s=t.children[i],c(e,a=t.leaf?r(s):s)&&(t.leaf?n.push(s):d(e,a)?this._all(s,n):u.push(s));t=u.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!c(e,t))return!1;for(var r,i,o,s,a=[];t;){for(r=0,i=t.children.length;r<i;r++)if(o=t.children[r],c(e,s=t.leaf?n(o):o)){if(t.leaf||d(e,s))return!0;a.push(o)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=h([]),this},remove:function(e,t){if(!e)return this;for(var r,i,o,s,a=this.data,u=this.toBBox(e),l=[],c=[];a||l.length;){if(a||(a=l.pop(),i=l[l.length-1],r=c.pop(),s=!0),a.leaf&&-1!==(o=n(e,a.children,t)))return a.children.splice(o,1),l.push(a),this._condense(l),this;s||a.leaf||!d(a,u)?i?(r++,a=i.children[r],s=!1):a=null:(l.push(a),c.push(r),r=0,i=a,a=a.children[0])}return this},toBBox:function(e){return e},compareMinX:s,compareMinY:a,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,i){var o,s=n-t+1,a=this._maxEntries;if(s<=a)return r(o=h(e.slice(t,n+1)),this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),(o=h([])).leaf=!1,o.height=i;var u,l,d,c,p=Math.ceil(s/a),y=p*Math.ceil(Math.sqrt(a));for(f(e,t,n,y,this.compareMinX),u=t;u<=n;u+=y)for(f(e,u,d=Math.min(u+y-1,n),p,this.compareMinY),l=u;l<=d;l+=p)c=Math.min(l+p-1,d),o.children.push(this._build(e,l,c,i-1));return r(o,this.toBBox),o},_chooseSubtree:function(e,t,n,r){for(var i,o,s,a,l,d,c,h,f,p;r.push(t),!t.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=t.children.length;i<o;i++)l=u(s=t.children[i]),f=e,p=s,(d=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l)<h?(h=d,c=l<c?l:c,a=s):d===h&&l<c&&(c=l,a=s);t=a||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,i=n?e:r(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),o(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)},_split:function(e,t){var n=e[t],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);var s=this._chooseSplitIndex(n,o,i),a=h(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,r(n,this.toBBox),r(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(e,t){this.data=h([e,t]),this.data.height=e.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,o,s,a,l,d,c,h,f,p,y,m,g,v;for(d=c=1/0,r=t;r<=n-t;r++)f=o=i(e,0,r,this.toBBox),p=s=i(e,r,n,this.toBBox),void 0,void 0,void 0,void 0,y=Math.max(f.minX,p.minX),m=Math.max(f.minY,p.minY),g=Math.min(f.maxX,p.maxX),v=Math.min(f.maxY,p.maxY),a=Math.max(0,g-y)*Math.max(0,v-m),l=u(o)+u(s),a<d?(d=a,h=r,c=l<c?l:c):a===d&&l<c&&(c=l,h=r);return h},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:s,i=e.leaf?this.compareMinY:a;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var s,a,u=this.toBBox,d=i(e,0,t,u),c=i(e,n-t,n,u),h=l(d)+l(c);for(s=t;s<n-t;s++)a=e.children[s],o(d,e.leaf?u(a):a),h+=l(d);for(s=n-t-1;s>=t;s--)a=e.children[s],o(c,e.leaf?u(a):a),h+=l(c);return h},_adjustParentBBoxes:function(e,t,n){for(var r=n;r>=0;r--)o(t[r],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():r(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},t}.apply(null,r))||(e.exports=i)},1427:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(0),n(11),n(38),n(5),n(2),n(37),n(34),n(76),n(412),n(1443),n(1433),n(1429)],void 0===(i=function(e,t,n,r,i,o,s,a,u,l,d,c,h,f){Object.defineProperty(t,"__esModule",{value:!0});var p=o.getLogger("esri.layers.graphics.data.FeatureStore"),y=function(){function e(e){this.geometryInfo=e,this._boundsStore=new c.BoundsStore,this._featuresById=new Map,this._markedIds=new Set,this.events=new i,this.featureAdapter=f.optimizedFeatureQueryEngineAdapter}return Object.defineProperty(e.prototype,"geometryType",{get:function(){return this.geometryInfo.geometryType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasM",{get:function(){return this.geometryInfo.hasM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasZ",{get:function(){return this.geometryInfo.hasZ},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numFeatures",{get:function(){return this._featuresById.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullBounds",{get:function(){var e=this;if(!this.numFeatures)return null;var t=u.create(u.NEGATIVE_INFINITY);return this._featuresById.forEach((function(n){var r=e._boundsStore.get(n.objectId);r&&(t[0]=Math.min(r[0],t[0]),t[1]=Math.min(r[1],t[1]),t[2]=Math.max(r[2],t[2]),t[3]=Math.max(r[3],t[3]))})),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storeStatistics",{get:function(){var e=0;return this._featuresById.forEach((function(t){t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this._add(e),this._emitChanged()},e.prototype.addMany=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this._add(r)}this._emitChanged()},e.prototype.clear=function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()},e.prototype.removeById=function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null},e.prototype.removeManyById=function(e){this._boundsStore.invalidateIndex();for(var t=0,n=e;t<n.length;t++){var r=n[t],i=this._featuresById.get(r);i&&this._remove(i)}this._emitChanged()},e.prototype.forEachBounds=function(e,t,n){for(var r=0,i=e;r<i.length;r++){var o=i[r],s=this._boundsStore.get(o.objectId);s&&t(a.fromRect(n,s))}},e.prototype.getFeature=function(e){return this._featuresById.get(e)},e.prototype.has=function(e){return this._featuresById.has(e)},e.prototype.forEach=function(e){this._featuresById.forEach((function(t){return e(t)}))},e.prototype.forEachInBounds=function(e,t){var n=this;this._boundsStore.forEachInBounds(e,(function(e){t(n._featuresById.get(e))}))},e.prototype.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()},e.prototype.sweep=function(){var e=this,t=!1;this._featuresById.forEach((function(n,r){e._markedIds.has(r)||(t=!0,e._remove(n))})),this._markedIds.clear(),t&&this._emitChanged()},e.prototype.executeTileQuery=function(e,t,r){return n.__awaiter(this,void 0,void 0,(function(){var i,o,s,a,d,c,f,p,y,m,g,v,_,b;return n.__generator(this,(function(n){return i=r.returnGeometry,o=r.returnCentroid,s=r.returnOutline,a=r.pixelBuffer,d=new Set,c=[],f=a*e.resolution,p=u.pad(e.bounds,f,u.create()),h.createTileFeatures(c,d,this.geometryInfo,this,p,i,o,s,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]}),("esriGeometryPoint"===this.geometryType||o)&&(y=l.getInfo(t))&&(m=y.valid,g=m[0],v=m[1],p[0]<g&&(_=u.fromValues(v-f,p[1],v,p[3]),h.createTileFeatures(c,d,this.geometryInfo,this,_,i,o,s,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[v,e.bounds[3]]})),p[2]>v&&(b=u.fromValues(g,p[1],g+f,p[3]),h.createTileFeatures(c,d,this.geometryInfo,this,b,i,o,s,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[g-v+e.bounds[0],e.bounds[3]]}))),c.sort((function(e,t){return e.localId-t.localId})),[2,{features:c,objectIds:d}]}))}))},e.prototype._emitChanged=function(){this.events.emit("changed",void 0)},e.prototype._add=function(e){if(e){var t=e.objectId;if(null!=t){var n,i=this._featuresById.get(t);if(this._markedIds.add(t),i?(e.localId=i.localId,n=this._boundsStore.get(t),this._boundsStore.delete(t)):s.isSome(this.onFeatureAdd)&&this.onFeatureAdd(e),!e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);n=d.getBoundsOptimizedGeometry(n||u.create(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(t,n),this._featuresById.set(t,e)}else p.error(new r("featurestore:invalid-feature","feature id is missing",{feature:e}))}},e.prototype._remove=function(e){return s.isSome(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e},e}();t.default=y}.apply(null,r))||(e.exports=i)},1433:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(34),n(412),n(414),n(1402),n(1405)],void 0===(i=function(e,t,n,r,i,o,s){Object.defineProperty(t,"__esModule",{value:!0});var a=new i.default,u={esriGeometryPoint:r.convertToPoint,esriGeometryPolyline:r.convertToPolyline,esriGeometryPolygon:r.convertToPolygon,esriGeometryMultipoint:r.convertToMultipoint};t.executeTileQueryForIds=function(e,t,r){var i=r.pixelBuffer*t.resolution,o=n.pad(t.bounds,i,n.create()),s=[];return e.featureStore.forEachInBounds(o,(function(t){return s.push(e.featureAdapter.getObjectId(t))})),s},t.createTileFeatures=function(e,t,n,r,i,c,h,f,p){var y=u[n.geometryType],m=l[n.geometryType],g="esriGeometryPolygon"===n.geometryType&&!f,v=n.hasZ?n.hasM?4:3:n.hasM?3:2;h&&!c?r.forEachInBounds(i,(function(r){return function(e,t,n,r,i){if(!t.has(n.objectId)){var a=s.getCentroid(r,n,i),u=n.attributes;a&&(t.add(n.objectId),e.push(new o.Feature(u,n.localId,null,a)))}}(e,t,r,n,p)})):c&&!h?r.forEachInBounds(i,(function(n){return function(e,t,n,r,i,s,u,l){if(!t.has(n.objectId)){var c=n.attributes,h=r(d(a,n.geometry,i,s,l,u),!1,!1);h&&(t.add(n.objectId),e.push(new o.Feature(c,n.localId,h,null)))}}(e,t,n,y,v,m,p,g)})):r.forEachInBounds(i,(function(r){return function(e,t,n,r,i,u,l,c,h){if(!t.has(n.objectId)){var f=s.getCentroid(r,n,i),p=n.attributes,y=u(d(a,n.geometry,l,c,h,i),!1,!1);y&&f&&(t.add(n.objectId),e.push(new o.Feature(p,n.localId,y,f)))}}(e,t,r,n,p,y,v,m,g)}))};var l={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0};function d(e,t,n,i,o,s){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var a,u,l,d,c=t.coords,h=t.lengths;if(!h.length)return e.coords[0]=r.quantizeX(s,c[0]),e.coords[1]=r.quantizeY(s,c[1]),e.coords.length=n,e;for(var f=0,p=0,y=p,m=0,g=h;m<g.length;m++){var v=g[m];if(!(v<i))if(p=y,l=a=r.quantizeX(s,c[f]),d=u=r.quantizeY(s,c[f+1]),e.coords[p]=l,e.coords[p+1]=d,f+=n,1!==v){var _=(l=r.quantizeX(s,c[f]))-a,b=(d=r.quantizeY(s,c[f+1]))-u,I=b/_;p+=2,e.coords[p]=_,e.coords[p+1]=b,a=l,u=d,f+=n;for(var x=2;x<v;x++){if(l=r.quantizeX(s,c[f]),d=r.quantizeY(s,c[f+1]),l!==a||d!==u){var F=l-a,B=d-u,j=B/F;I!==j&&(isFinite(I)||isFinite(j))||!(o||(b>=0&&B>=0||b<=0&&B<=0)&&(_>=0&&F>=0||_<=0&&F<=0))?(_=F,b=B,p+=2):(_+=F,b+=B),e.coords[p]=_,e.coords[p+1]=b,I=j,a=l,u=d}f+=n}var w=(p+2-y)/2;w>=i&&(e.lengths.push(w),y=p+2)}else e.lengths.push(1),y=p+2}return e.coords.length>y&&(e.coords.length=y),e.coords.length?e:null}t.quantizeOptimizedGeometryForDisplay=d}.apply(null,r))||(e.exports=i)},1443:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(25),n(1414),n(14)],void 0===(i=function(e,t,n,r){Object.defineProperty(t,"__esModule",{value:!0});var i={minX:0,minY:0,maxX:0,maxY:0},o=function(){function e(){var e=this;this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=r(9,n("csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){if(e._indexInvalid){var t=new Array(e._idByBounds.size),n=0;e._idByBounds.forEach((function(e,r){t[n++]=r})),e._indexInvalid=!1,e._index.clear(),e._index.load(t)}else e._boundsToLoad.length&&(e._index.load(e._boundsToLoad.filter((function(t){return e._idByBounds.has(t)}))),e._boundsToLoad.length=0)}}return e.prototype.clear=function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()},e.prototype.delete=function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))},e.prototype.forEachInBounds=function(e,t){this._loadIndex();for(var n=0,r=function(e,t){return i.minX=t[0],i.minY=t[1],i.maxX=t[2],i.maxY=t[3],e.search(i)}(this._index,e);n<r.length;n++){var o=r[n];t(this._idByBounds.get(o))}},e.prototype.get=function(e){return this._boundsById.get(e)},e.prototype.has=function(e){return this._boundsById.has(e)},e.prototype.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)},e.prototype.set=function(e,t){if(!this._indexInvalid){var n=this._boundsById.get(e);n&&(this._index.remove(n),this._idByBounds.delete(n))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))},e}();t.BoundsStore=o}.apply(null,r))||(e.exports=i)},1470:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(0),n(25),n(8),n(697)],void 0===(i=function(e,t,n,r,i,o){Object.defineProperty(t,"__esModule",{value:!0}),t.createDrawingInfo=function(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.defaultPointSymbolJSON:"esriGeometryPolyline"===e?o.defaultPolylineSymbolJSON:o.defaultPolygonSymbolJSON}}},t.createDefaultAttributesFunction=function(e,t){if(r("csp-restrictions"))return function(){var r;return n.__assign(((r={})[t]=null,r),e)};try{var i="this."+t+" = null;";for(var o in e)i+="this."+o+" = "+JSON.stringify(e[o])+";";var s=new Function(i);return function(){return new s}}catch(r){return function(){var r;return n.__assign(((r={})[t]=null,r),e)}}},t.createDefaultTemplate=function(e){return void 0===e&&(e={}),[{name:"New Feature",description:"",prototype:{attributes:i.clone(e)}}]}}.apply(null,r))||(e.exports=i)},1646:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(0),n(11),n(419),n(414)],void 0===(i=function(e,t,n,r,i,o){Object.defineProperty(t,"__esModule",{value:!0});var s={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function a(e){var t,r,i;return n.__generator(this,(function(n){switch(n.label){case 0:switch(e.type){case"Feature":return[3,1];case"FeatureCollection":return[3,3]}return[3,7];case 1:return[4,e];case 2:return n.sent(),[3,7];case 3:t=0,r=e.features,n.label=4;case 4:return t<r.length?(i=r[t])?[4,i]:[3,6]:[3,7];case 5:n.sent(),n.label=6;case 6:return t++,[3,4];case 7:return[2]}}))}function u(e){for(var t=0,n=0;n<e.length;n++){var r=e[n],i=e[(n+1)%e.length];t+=r[0]*i[1]-i[0]*r[1]}return t<=0}function l(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function d(e,t,n){var r=l(t);u(r)?h(e,r,n):f(e,r,n)}function c(e,t,n){var r=l(t);u(r)?f(e,r,n):h(e,r,n)}function h(e,t,n){for(var r=0,i=t;r<i.length;r++)p(e,i[r],n);e.lengths.push(t.length)}function f(e,t,n){for(var r=t.length-1;r>=0;r--)p(e,t[r],n);e.lengths.push(t.length)}function p(e,t,n){var r=t[0],i=t[1],o=t[2];e.coords.push(r,i),n.hasZ&&e.coords.push(o||0)}function y(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}t.validateGeoJSON=function(e){if(!e)throw new r("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new r("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});var t=e.crs;if(t){var n="string"==typeof t?t:"name"===t.type?t.properties.name:null,i=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!i.test(n))throw new r("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}},t.inferLayerProperties=function(e,t){void 0===t&&(t={});for(var r=a(e),i=[],o=new Set,u=new Set,l=!1,d=Number.NEGATIVE_INFINITY,c=null,h=!1,f=void 0,p=t.geometryType,m=void 0===p?null:p,g=!1,v=function(){var e,t,a=r.next(),p=a.value;if(a.done){var v=c&&1===c.length&&c[0]||null;if(v)for(var _=0,b=i;_<b.length;_++){var I=b[_];I.name===v&&(I.type="esriFieldTypeOID")}return{value:{fields:i,geometryType:m,hasZ:l,maxObjectId:Math.max(0,d),objectIdFieldName:v,objectIdFieldType:f,unknownFields:(e=u,t=[],e.forEach((function(e){return t.push(e)})),t)}}}var x=p.geometry,F=p.properties,B=p.id;if(x&&(m||(m=s[x.type]),s[x.type]!==m))return"continue";if(!l){var j=function(e){var t,r,i,o,s,a,u,l,d;return n.__generator(this,(function(c){switch(c.label){case 0:if(!e)return[2,null];switch(e.type){case"Point":return[3,1];case"LineString":case"MultiPoint":return[3,3];case"MultiLineString":case"Polygon":return[3,5];case"MultiPolygon":return[3,10]}return[3,17];case 1:return[4,e.coordinates];case 2:return c.sent(),[3,17];case 3:return[5,n.__values(e.coordinates)];case 4:return c.sent(),[3,17];case 5:t=0,r=e.coordinates,c.label=6;case 6:return t<r.length?(i=r[t],[5,n.__values(i)]):[3,9];case 7:c.sent(),c.label=8;case 8:return t++,[3,6];case 9:return[3,17];case 10:o=0,s=e.coordinates,c.label=11;case 11:if(!(o<s.length))return[3,16];a=s[o],u=0,l=a,c.label=12;case 12:return u<l.length?(d=l[u],[5,n.__values(d)]):[3,15];case 13:c.sent(),c.label=14;case 14:return u++,[3,12];case 15:return o++,[3,11];case 16:return[3,17];case 17:return[2]}}))}(x);l=function(e){for(;;){var t=e.next(),n=t.value;if(t.done)return!1;if(n.length>2)return!0}}(j)}if(h||(h=null!=B)&&"number"==(f=typeof B)&&(c=Object.keys(F).filter((function(e){return F[e]===B}))),h&&"number"===f&&null!=B&&(d=Math.max(d,B),c.length>1?c=c.filter((function(e){return F[e]===B})):1===c.length&&(c=F[c[0]]===B?c:[])),!g&&F){var w=!0;for(var M in F)if(!o.has(M)){var E=F[M];if(null!=E){var S=y(E);"unknown"!==S?(u.delete(M),o.add(M),i.push({name:M,alias:M,type:S})):u.add(M)}else w=!1,u.add(M)}g=w}};;){var _=v();if("object"==typeof _)return _.value}},t.createOptimizedFeatures=function(e,t){return function(e){for(var t=[];;){var n=e.next(),r=n.value;if(n.done)return t;t.push(r)}}(function(e,t){var r,a,u,l,f,y,m,g;return void 0===t&&(t={}),n.__generator(this,(function(n){switch(n.label){case 0:r=t.geometryType,a=t.objectIdFieldName,n.label=1;case 1:return u=e.next(),l=u.value,u.done?[2]:(f=l.geometry,y=l.properties,m=l.id,f&&s[f.type]!==r?[3,1]:(g=y||{},a&&null!=m&&!g[a]&&(g[a]=m),[4,new i.default(f?function(e,t,n){switch(t.type){case"LineString":return function(e,t,n){return h(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function(e,t,n){for(var r=0,i=t.coordinates;r<i.length;r++){h(e,i[r],n)}return e}(e,t,n);case"MultiPoint":return function(e,t,n){return h(e,t.coordinates,n),e}(e,t,n);case"MultiPolygon":return function(e,t,n){for(var r=0,i=t.coordinates;r<i.length;r++){var o=i[r];d(e,o[0],n);for(var s=1;s<o.length;s++)c(e,o[s],n)}return e}(e,t,n);case"Point":return function(e,t,n){return p(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function(e,t,n){var r=t.coordinates;d(e,r[0],n);for(var i=1;i<r.length;i++)c(e,r[i],n);return e}(e,t,n)}}(new o.default,f,t):null,g)]));case 2:return n.sent(),[3,1];case 3:return[2]}}))}(a(e),t))}}.apply(null,r))||(e.exports=i)},1647:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(0),n(76),n(66),n(14)],void 0===(i=function(e,t,r,i,o){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){this.code=null,this.description=null},a=function(e){this.error=new s,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e};function u(e){return new a(e)}t.createFeatureEditErrorResult=u;var l=function(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e};t.createFeatureEditSuccessResult=function(e){return new l(e)};var d,c=new Set;function h(e,t){var n=t;return"string"==typeof t&&o.isNumericField(e)?n=parseFloat(t):null!=t&&o.isStringField(e)&&"string"!=typeof t&&(n=String(t)),o.sanitizeNullFieldValue(n)}function f(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return d?[2,d]:[4,new Promise((function(e,t){Promise.all([n.e(8),n.e(23)]).then(function(){var t=[n(1523)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return[2,d=e.sent()]}}))}))}t.mixAttributes=function(e,t,n,r,i,s){for(var a in void 0===i&&(i=!1),c.clear(),r){var l=e.get(a);if(l){var d=r[a],f=h(l,d);if(f!==d&&s&&s.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:l,originalValue:d,sanitizedValue:f}}),c.add(l.name),l&&(i||l.editable)){var p=o.validateFieldValue(l,f);if(p)return u(o.validationErrorToString(p,l,f));n[l.name]=f}}}for(var y=0,m=t;y<m.length;y++){var g=m[y];if(!c.has(g.name))return u('missing required field "'+g.name+'"')}return null},t.simplify=function(e,t){if(!e||!i.isValid(t))return e;if("rings"in e||"paths"in e){if(!d)throw new TypeError("geometry engine not loaded");return d.simplify(t,e)}return e},t.loadGeometryEngine=f,t.loadGeometryEngineForSimplify=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return!i.isValid(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t?[3,2]:[4,f()];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}}.apply(null,r))||(e.exports=i)}}]);